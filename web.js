(()=>{"use strict";var n={d:(t,i)=>{for(var e in i)n.o(i,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t)};n.d({},{o:()=>o});let t="https://tejassrinivasan.pythonanywhere.com/",i=null;function e(n,t,e,o,a){i&&(clearInterval(i),i=null),e.forEach((n=>n.setAttribute("disabled","true")));let l=document.createElement("div");l.id=`timer_${t.id}`,l.style.fontWeight="bold",l.style.marginTop="10px",t.appendChild(l);let r=n;l.textContent=a+` You can make your selection in ${r} second(s).`,i=setInterval((()=>{r--,r>=0?l.textContent=a+` You can make your selection in ${r} second(s).`:(null!==i&&(clearInterval(i),i=null),i=null,t.removeChild(l),e.forEach((n=>n.removeAttribute("disabled"))),o&&o())}),1e3)}var o=!1,a=[];let l,r,s,_,c,d=-1,u=null,p=-1,f=-1,g=-1,v=-1,b=0,h=5,m=-1,x=1,y=0,w=0;var A={},I={};const T=[document.getElementById("button_initial_decision_option1"),document.getElementById("button_initial_decision_option2"),document.getElementById("button_initial_decision_option3"),document.getElementById("button_initial_decision_option4")],k=[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2"),document.getElementById("button_final_decision_option3"),document.getElementById("button_final_decision_option4")],E=document.getElementById("initial_user_decision_div");function N(n,t){if(!n)throw t||"Assertion failed"}function B(n){y+=n,0==y?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),y>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==y&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),D()),$("#main_box_instructions").children(":not(input)").each(((n,t)=>{$(t).hide()})),$(`#instructions_${y}`).show()}function O(n){_=Date.now(),p=n,N(1==n||2==n||3==n||4==n,"Invalid option!"),$(`#button_initial_decision_option${n}`).attr("activedecision","true");for(let t=1;t<=4;t++)t!=n&&$(`#button_initial_decision_option${t}`).removeAttr("activedecision"),$(`#button_initial_decision_option${t}`).attr("disabled","true");console.log("User's initial decision: Option ",n),$("#initial_user_confidence_div").show(),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function S(n){r=Date.now(),g=n,N(1==n||2==n||3==n,"Invalid option!");for(let t=1;t<=3;t++)t!=n&&$(`#button_initial_confidence_option${t}`).removeAttr("activedecision"),$(`#button_initial_confidence_option${t}`).attr("disabled","true");$(`#button_initial_confidence_option${n}`).attr("activedecision","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_decision_option3").removeAttr("disabled"),$("#button_final_decision_option4").removeAttr("disabled"),async function(){console.log("Getting AI assistance...");let n=u.ai_confidence,t=0;if(z&&(t=(h-5)/2.5,console.log("Using user reported trust value: ",h)),A={intervention_applied:!1,trust_level_at_start_of_interaction:t},"none"==G||p==u.ai_prediction)console.log("Not applying any intervention."),n=u.ai_confidence;else if("confidence_manip"==G)if("none"==F||"mitigate_undertrust"==F&&t<L||"mitigate_overtrust"==F&&t>L){if(console.log("Applying AI confidence manipulation intervention."),"fixed"==M){let t=Number(u.ai_confidence.replace("%",""))/100,i=Math.min(1,t+R);i=Math.max(.5,i),n=String((100*i).toFixed(0))+"%";let e=(i-t).toFixed(2);console.log("Actual AI confidence: ",u.ai_confidence,", Confidence shown to user: ",n),A.conf_actual=u.ai_confidence,A.conf_displayed=n,A.conf_change=e,A.intervention_applied=!0}}else console.log("Conditions for applying 'confidence manipulation' intervention not satisfied.");else if("ai_explanation"==G)if("none"==F||"mitigate_undertrust"==F&&t<L||"mitigate_overtrust"==F&&t>L){if(console.log("Applying AI explanation intervention."),"fixed"==M){console.log("Showing explanation");let n=u.ai_explanation?u.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(n),$("#ai_explanation_div").show(),A.explanation_shown=n,A.intervention_applied=!0,e(15,document.getElementById("ai_explanation_div"),k,null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("ai_contrastive_explanation"==G)if("none"==F||"mitigate_undertrust"==F&&t<L||"mitigate_overtrust"==F&&t>L){if(console.log("Applying AI explanation intervention."),"fixed"==M){console.log("Showing explanation");let n=u.ai_contrastive_explanation?u.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(n),$("#ai_contrastive_explanation_div").show(),A.explanation_shown=n,A.intervention_applied=!0,e(15,document.getElementById("ai_contrastive_explanation_div"),k,null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("both_explanation_types"==G)if(N("mitigate_underandovertrust"==F,"Goal for 'both explanation types' intervention should be 'mitigate_underandovertrust'"),t<W){console.log("Applying explanation intervention for undertrust"),console.log("Showing explanation");let n=u.ai_explanation?u.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(n),$("#ai_explanation_div").show(),A.explanation_shown=n,A.intervention_applied=!0,e(15,document.getElementById("ai_explanation_div"),k,null,"Please read the explanation.")}else if(t>V){console.log("Applying contrastive explanation intervention for overtrust");let n=u.ai_contrastive_explanation?u.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(n),$("#ai_contrastive_explanation_div").show(),A.explanation_shown=n,A.intervention_applied=!0,e(15,document.getElementById("ai_contrastive_explanation_div"),k,null,"Please read the explanation.")}console.log("AI Assistance Intervention Details: ",A),$("#ai_prediction_span").html("Option "+u.ai_prediction),$("#ai_confidence_span").html(n),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}function C(n){c=Date.now(),f=n,N(1==n||2==n||3==n||4==n,"Invalid option!");for(let t=1;t<=4;t++)t!=n&&$(`#button_final_decision_option${t}`).removeAttr("activedecision"),$(`#button_final_decision_option${t}`).attr("disabled","true");$(`#button_final_decision_option${n}`).attr("activedecision","true"),$("#final_user_confidence_div").show(),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function P(n){s=Date.now(),v=n,N(1==n||2==n||3==n,"Invalid option!");for(let t=1;t<=3;t++)t!=n&&$(`#button_final_confidence_option${t}`).removeAttr("activedecision"),$(`#button_final_confidence_option${t}`).attr("disabled","true");$(`#button_final_confidence_option${n}`).attr("activedecision","true"),async function(){let n=u.correct_option,t=u[`option${n}`],i=n==f,e=u.ai_is_correct,o="Correct answer: <b>Option "+n+": "+t+"</b>.<br>";o+=i?"You picked Option "+f+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+f+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",o+=e?"The AI picked Option "+u.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+u.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",i?(o+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",b+=.1):o+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",o+="<br>",$("#balance").text(`Balance: $${b.toFixed(2)} + $2.0`),$("#result_span").html(o),$("#result_span").show(),H?$("#button_next").show():$("#user_trust_report_div").show()}()}function D(){for(let n=1;n<=4;n++)$(`#button_initial_decision_option${n}`).removeAttr("activedecision"),$(`#button_initial_decision_option${n}`).removeAttr("disabled"),$(`#button_final_decision_option${n}`).removeAttr("activedecision"),$(`#button_final_decision_option${n}`).removeAttr("disabled");for(let n=1;n<=3;n++)$(`#button_initial_confidence_option${n}`).removeAttr("activedecision"),$(`#button_initial_confidence_option${n}`).removeAttr("disabled"),$(`#button_final_confidence_option${n}`).removeAttr("activedecision"),$(`#button_final_confidence_option${n}`).removeAttr("disabled");if($("#ai_assistance_div").hide(),$("#ai_explanation_div").hide(),$("#ai_contrastive_explanation_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#user_trust_report_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==d?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*h} / 100.`),$("#range_val").val(h),m=h,d+=1,d>=a.length)return $("#main_box_experiment").hide(),void(o?$("#main_box_end_mock").show():$("#main_box_end").show());if(u=a[d],$("#question_span").html(u.question),$("#option1_span").html(u.option1),$("#option2_span").html(u.option2),$("#option3_span").html(u.option3),$("#option4_span").html(u.option4),u.hasOwnProperty("reward_ratio")){let[n,t]=u.reward_ratio;n=Number(n),t=Number(t),x=n/t}else x=1;l=Date.now(),$("#progress").text(`Progress: ${d+1} / ${a.length}`),e(10,E,T,null,"Please read the symptoms and options closely.")}document.getElementById("final_user_decision_div"),$("#button_instructions_next").on("click",(()=>B(1))),$("#button_instructions_prev").on("click",(()=>B(-1))),$("#button_next").on("click",(()=>{if(-1!=d){let n={question_i:d,user_balance_post_interaction:b,user_trust_val_before:m,user_trust_val_after:h,initial_user_decision:p,final_user_decision:f,initial_user_confidence:g,final_user_confidence:v};n.times={initial_decision:_-l,initial_confidence:r-_,final_decision:c-r,final_confidence:s-c,trust_decision:Date.now()-s},n.question=u,n.count_exited_page=w,n.intervention_details=A,n.trust_effect_prediction_data=I,async function(n){if(o)console.log("logged (mock)",n);else{n.url_data=globalThis.url_data,console.log("Data"),"study_id"in n.url_data||(n.url_data.study_id="trialrun_studies"),n.url_data.queue_id=globalThis.uid,console.log("logged",n),console.log("Logging to",t+"log");try{return await $.ajax(t+"log",{data:JSON.stringify({project:"medical-diagnosis-study/"+n.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+n.url_data.prolific_id,payload:JSON.stringify(n)}),type:"POST",contentType:"application/json"})}catch(n){console.log(n)}}}(n),w=0}D()})),$("#range_val").on("input change",(function(){h=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*h} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>O(1))),$("#button_initial_decision_option2").on("click",(()=>O(2))),$("#button_initial_decision_option3").on("click",(()=>O(3))),$("#button_initial_decision_option4").on("click",(()=>O(4))),$("#button_initial_confidence_option1").on("click",(()=>S(1))),$("#button_initial_confidence_option2").on("click",(()=>S(2))),$("#button_initial_confidence_option3").on("click",(()=>S(3))),$("#button_final_decision_option1").on("click",(()=>C(1))),$("#button_final_decision_option2").on("click",(()=>C(2))),$("#button_final_decision_option3").on("click",(()=>C(3))),$("#button_final_decision_option4").on("click",(()=>C(4))),$("#button_final_confidence_option1").on("click",(()=>P(1))),$("#button_final_confidence_option2").on("click",(()=>P(2))),$("#button_final_confidence_option3").on("click",(()=>P(3)));const j=new URLSearchParams(window.location.search),q=j.get("start"),U=j.get("uid");if(globalThis.url_data=function(n){const t={};for(const[i,e]of n)t[i]=e;return t}(j.entries()),null!=U){if(globalThis.uid=U,"prolific_random"==globalThis.uid){let n=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${j.get("prolific_queue_name")}/${n}`}}else{let n=null;for(;null==n;)n=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=n}let Y=null;globalThis.uid.includes("343")||globalThis.uid.includes("434")?Y=[7,8,9,17,18,19,27,28,29]:globalThis.uid.includes("735")&&(Y=[10,11,12,13,14,25,26,27,28,29]);let F=j.get("intervention_goal");if(null==F&&(F="none"),!["none","mitigate_undertrust","mitigate_overtrust","mitigate_underandovertrust"].includes(F))throw new Error("Invalid AI Assistance Intervention Goal: "+F);let G=j.get("intervention_type");if(null==G&&(G="none"),!["none","dummy","confidence_manip","ai_explanation","ai_contrastive_explanation","both_explanation_types"].includes(G))throw new Error("Invalid AI Assistance Intervention: "+G);let M=j.get("intervention_strategy");if(null==M&&(M="dummy"),!["dummy","fixed","adaptive"].includes(M))throw new Error("Invalid AI Assistance Intervention Strategy: "+M);let J=Number(j.get("intervention_threshold"));null==J&&(J=-1);let L=Number(j.get("intervention_trust_threshold"));null==L&&(L=0);let R=Number(j.get("intervention_fixedconfchange"));null==R&&(R=0);let W=Number(j.get("intervention_undertrust_threshold"));null==W&&(W=L);let V=Number(j.get("intervention_overtrust_threshold"));null==V&&(V=L);let z="true"==j.get("use_user_reported_trust_level");null==z&&(z=!1);let H="true"==j.get("skip_trust_reporting");null==H&&(H=!1),console.log("AIInterventionGoal: ",F),console.log("AIInterventionType: ",G),console.log("AIInterventionStrategy: ",M),console.log("InterventionALDiffThreshold: ",J),console.log("InterventionTrustThreshold: ",L),console.log("InterventionFixedConfChange: ",R),console.log("useUserReportedTrustVal: ",z),console.log("skip_trust_reporting: ",H),"mitigate_undertrust"==F?(N(L<=0,"Trust threshold for mitigating undertrust cannot be positive."),N(R>=0,"Confidence change for mitigating undertrust cannot be negative.")):"mitigate_overtrust"==F&&(N(L>=0,"Trust threshold for mitigating overtrust cannot be negative."),N(R<=0,"Confidence change for mitigating overtrust cannot be positive.")),globalThis.url_data.intervention_goal=F,globalThis.url_data.intervention_type=G,globalThis.url_data.intervention_strategy=M,globalThis.url_data.intervention_threshold=J,globalThis.url_data.intervention_fixedconfchange=R,globalThis.url_data.use_user_reported_trust_level=z,globalThis.uid.startsWith("demo_paper")&&(o=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((n=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((n=>{a=n,null!=q&&(d=parseInt(q)-1,console.log("Starting from",d)),B(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let K=!1;document.onvisibilitychange=()=>{K||(w+=1,K=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),K=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEM5QixFQUFPc0MsR0FBK0IsRUFBRyxtRUFHN0N3QixXQUFXQyxTQUE0QixrQkFBSWxDLEVBQzNDaUMsV0FBV0MsU0FBNEIsa0JBQUluQyxFQUMzQ2tDLFdBQVdDLFNBQWdDLHNCQUFJaEMsRUFDL0MrQixXQUFXQyxTQUFpQyx1QkFBSWdDLEVBQ2hEakMsV0FBV0MsU0FBdUMsNkJBQUl6QixFQUN0RHdCLFdBQVdDLFNBQXdDLDhCQUFJcEMsRUFHbkRtQyxXQUFXRSxJQUFJZ0MsV0FBVyxnQkFDMUJ6SCxHQUFXLEdBSWY2QyxRQUFRQyxJQUFJLG1CQUFvQnlDLFdBQVdFLEtGeHdCcEN4QyxpQkFLSCxhQUhtQnBCLEVBQUU2RixRQUNqQixnQkFBZ0JuQyxXQUFXRSxjQUFjL0MsS0FBS0MsUUFHdEQsQ0Vtd0JBZ0YsR0FBWUMsT0FBT0MsSUFFZmhGLFFBQVFDLElBQUksb0JBQ1pELFFBQVFDLElBQUl5QyxXQUFXRSxLQUN2QmEsT0FBT0MsU0FBU3VCLFFBQVEsSUFFMUJDLE1BQU1DLElBQ0ovSCxFQUFPK0gsRUFDYyxNQUFqQnZCLElBQ0FsRyxFQUFhMEgsU0FBU3hCLEdBQWlCLEVBQ3ZDNUQsUUFBUUMsSUFBSSxnQkFBaUJ2QyxJQUdqQ29CLEVBQWtCLEdBQ2xCRSxFQUFFLDBCQUEwQkcsT0FDNUJILEVBQUUsaUNBQWlDSyxNQUFNLElBRzdDVyxRQUFRQyxJQUFJLDZCQUE4QnlDLFdBQVdFLEtBRXJELElBQUl5QyxHQUFlLEVBQ25COUksU0FBUytJLG1CQUFxQixLQUNyQkQsSUFDRGhILEdBQXFCLEVBQ3JCZ0gsR0FBZSxFQUNUM0MsV0FBV0UsSUFBS2dDLFdBQVcsU0FDN0JXLE1BQU0sZ0ZBRVZGLEdBQWUsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRfZGF0YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIGluY2x1ZGUgdGltZXN0YW1wIHNvIHRoYXQgdGhpbmdzIGRvbid0IGdldCBjYWNoZWRcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5nZXRKU09OKFxuICAgICAgICBgYmFrZWRfcXVldWVzLyR7Z2xvYmFsVGhpcy51aWR9Lmpzb24/dD0ke0RhdGUubm93KCl9YCxcbiAgICApXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ19kYXRhKGRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZGF0YVtcInVybF9kYXRhXCJdID0gZ2xvYmFsVGhpcy51cmxfZGF0YVxuICAgIGNvbnNvbGUubG9nKFwiRGF0YVwiKVxuICAgIGlmICghKFwic3R1ZHlfaWRcIiBpbiBkYXRhWyd1cmxfZGF0YSddKSkge1xuICAgICAgICBkYXRhWyd1cmxfZGF0YSddW1wic3R1ZHlfaWRcIl0gPSBcInRyaWFscnVuX3N0dWRpZXNcIlxuICAgIH1cbiAgICBkYXRhW1widXJsX2RhdGFcIl1bXCJxdWV1ZV9pZFwiXSA9IGdsb2JhbFRoaXMudWlkXG4gICAgY29uc29sZS5sb2coXCJsb2dnZWRcIiwgZGF0YSlcbiAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdG9cIiwgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIilcblxuICAgIHRyeSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCJtZWRpY2FsLWRpYWdub3Npcy1zdHVkeS9cIiArIGRhdGFbJ3VybF9kYXRhJ11bJ3N0dWR5X2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHVpZDogZ2xvYmFsVGhpcy51aWQucmVwbGFjZShcIi9cIiwgXCJfXCIpICsgXCJfXCIgKyBkYXRhWyd1cmxfZGF0YSddWydwcm9saWZpY19pZCddLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbn0iLCJpbXBvcnQgeyBFTkFCTEVfVElNRVIgfSBmcm9tICcuL2dsb2JhbHMnO1xuXG5mdW5jdGlvbiBwYXJhbXNUb09iamVjdChlbnRyaWVzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9XG4gIC8vIGVhY2ggJ2VudHJ5JyBpcyBhIFtrZXksIHZhbHVlXSB0dXBwbGVcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZW50cmllcykge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubGV0IGFjdGl2ZVRpbWVyOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD4gfCBudWxsID0gbnVsbDsgLy8gVGltZXIgaW50ZXJ2YWxcblxuZnVuY3Rpb24gc3RhcnRUaW1lcihkdXJhdGlvbiwgc3RlcERpdiwgYnV0dG9ucywgY2FsbGJhY2ssIG1lc3NhZ2UpIHtcbiAgaWYgKCFFTkFCTEVfVElNRVIpIHtcbiAgICAgIC8vIElmIHRoZSB0aW1lciBpcyBkaXNhYmxlZCwgZW5hYmxlIHRoZSBidXR0b25zIGltbWVkaWF0ZWx5XG4gICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gIH1cblxuICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXIgdG8gcHJldmVudCBtdWx0aXBsZSBpbnRlcnZhbHNcbiAgaWYgKGFjdGl2ZVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTtcbiAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIC8vIERpc2FibGUgYnV0dG9uc1xuICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIikpO1xuICBcbiAgLy8gU2hvdyB0aW1lciB2aXN1YWxseVxuICBsZXQgdGltZXJEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRpbWVyRGlzcGxheS5pZCA9IGB0aW1lcl8ke3N0ZXBEaXYuaWR9YDtcbiAgdGltZXJEaXNwbGF5LnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gIHRpbWVyRGlzcGxheS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gIHN0ZXBEaXYuYXBwZW5kQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICBsZXQgcmVtYWluaW5nVGltZSA9IGR1cmF0aW9uO1xuXG4gIC8vIEluaXRpYWwgZGlzcGxheVxuICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlICsgYCBZb3UgY2FuIG1ha2UgeW91ciBzZWxlY3Rpb24gaW4gJHtyZW1haW5pbmdUaW1lfSBzZWNvbmQocykuYDtcblxuICBhY3RpdmVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHJlbWFpbmluZ1RpbWUtLTtcbiAgICAgIGlmIChyZW1haW5pbmdUaW1lID49IDApIHtcbiAgICAgICAgICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlICsgYCBZb3UgY2FuIG1ha2UgeW91ciBzZWxlY3Rpb24gaW4gJHtyZW1haW5pbmdUaW1lfSBzZWNvbmQocykuYDtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBpZiAoYWN0aXZlVGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhY3RpdmVUaW1lcik7IC8vIFN0b3AgdGhlIHRpbWVyXG4gICAgICAgICAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aXZlVGltZXIgPSBudWxsO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRpbWVyIGRpc3BsYXlcbiAgICAgICAgICBzdGVwRGl2LnJlbW92ZUNoaWxkKHRpbWVyRGlzcGxheSk7XG5cbiAgICAgICAgICAvLyBFbmFibGUgYnV0dG9uc1xuICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcblxuICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgfSwgMTAwMCk7XG59XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0LCBzdGFydFRpbWVyIH07IiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gXCIuL2dsb2JhbHNcIlxuZXhwb3J0IHZhciBVSUQ6IHN0cmluZ1xuZXhwb3J0IHZhciBNT0NLTU9ERTogYm9vbGVhbiA9IGZhbHNlXG5pbXBvcnQgeyBsb2FkX2RhdGEsIGxvZ19kYXRhIH0gZnJvbSAnLi9jb25uZWN0b3InXG5pbXBvcnQgeyBwYXJhbXNUb09iamVjdCwgc3RhcnRUaW1lciB9IGZyb20gXCIuL3V0aWxzXCJcbi8vaW1wb3J0IHsgZ2V0X3VzZXJfdHJ1c3RfZWZmZWN0LCBnZXRfYWRqdXN0ZWRfYWlfY29uZmlkZW5jZX0gZnJvbSBcIi4vcnVuX3VzZXJfbW9kZWxzXCJcblxubGV0IFVTRVJfTU9ERUxTX1JPT1QgPSBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxubGV0IHVzZXJfZGVjaXNpb25fbW9kZWwgPSBcInVzZXJfYWNjZXB0YW5jZV9tb2RlbC1sb2dpc3RpY3JlZ3Jlc3Npb24tMC45MzQ3dGVzdGYxXCJcbmxldCB0cnVzdF9lZmZlY3RfbW9kZWwgPSBcInRydXN0X2VmZmVjdF9tb2RlbC1zdm1fbGluZWFyLTAuNDY0NHRlc3RtYWUtMC45MDk1dGVzdHRlZGFcIlxuXG52YXIgZGF0YTogYW55W10gPSBbXVxubGV0IHF1ZXN0aW9uX2kgPSAtMVxubGV0IHF1ZXN0aW9uOiBhbnkgPSBudWxsXG5sZXQgaW5pdGlhbF91c2VyX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGZpbmFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9jb25maWRlbmNlOiBudW1iZXIgPSAtMVxubGV0IGJhbGFuY2UgPSAwXG5cbmxldCB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSA1XG5sZXQgcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSAtMVxuXG5sZXQgYmV0X3ZhbF9yYXRpbzogbnVtYmVyID0gMVxubGV0IHRpbWVfcXVlc3Rpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IGluc3RydWN0aW9uX2k6IG51bWJlciA9IDBcbmxldCBjb3VudF9leGl0ZWRfcGFnZTogbnVtYmVyID0gMFxuXG5cbmxldCB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSAwXG5cbnZhciBhbGxfdXNlcl9pbnRlcmFjdGlvbnMgPSBbXVxudmFyIGludGVydmVudGlvbl9kZXRhaWxzID0ge31cbnZhciB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge31cbmxldCBmaW5kbmV3Y29uZl9yZXN1bHQ6IGFueVxuXG5jb25zdCBidXR0b25zX2luaXRpYWxkZWNpc2lvbiA9IFtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uM1wiKSxcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjRcIiksXG5dXG5jb25zdCBidXR0b25zX2ZpbmFsZGVjaXNpb24gPSBbXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKSxcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjNcIiksXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uNFwiKSxcbl1cbmNvbnN0IGluaXRpYWxfdXNlcl9kZWNpc2lvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluaXRpYWxfdXNlcl9kZWNpc2lvbl9kaXZcIilcbmNvbnN0IGZpbmFsX3VzZXJfZGVjaXNpb25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKVxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5leHRfaW5zdHJ1Y3Rpb25zKGluY3JlbWVudDogbnVtYmVyKSB7XG4gICAgaW5zdHJ1Y3Rpb25faSArPSBpbmNyZW1lbnRcblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA2KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNykge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmIChxdWVzdGlvbl9pICE9IC0xKSB7XG4gICAgICAgIGxldCBsb2dnZWRfZGF0YSA9IHtcbiAgICAgICAgICAgIFwicXVlc3Rpb25faVwiOiBxdWVzdGlvbl9pLFxuICAgICAgICAgICAgXCJ1c2VyX2JhbGFuY2VfcG9zdF9pbnRlcmFjdGlvblwiOiBiYWxhbmNlLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbF9iZWZvcmVcIjogcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbF9hZnRlclwiOiB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJpbml0aWFsX3VzZXJfZGVjaXNpb25cIjogaW5pdGlhbF91c2VyX2RlY2lzaW9uLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2RlY2lzaW9uXCI6IGZpbmFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9jb25maWRlbmNlXCI6IGluaXRpYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2NvbmZpZGVuY2VcIjogZmluYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RpbWVzJ10gPSB7XG4gICAgICAgICAgICBcImluaXRpYWxfZGVjaXNpb25cIjogdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJpbml0aWFsX2NvbmZpZGVuY2VcIjogdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9kZWNpc2lvblwiOiB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9jb25maWRlbmNlXCI6IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgLSB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcInRydXN0X2RlY2lzaW9uXCI6IERhdGUubm93KCkgLSB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZF9kYXRhWydxdWVzdGlvbiddID0gcXVlc3Rpb25cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ2NvdW50X2V4aXRlZF9wYWdlJ10gPSBjb3VudF9leGl0ZWRfcGFnZVxuICAgICAgICBsb2dnZWRfZGF0YVsnaW50ZXJ2ZW50aW9uX2RldGFpbHMnXSA9IGludGVydmVudGlvbl9kZXRhaWxzXG4gICAgICAgIGxvZ2dlZF9kYXRhWyd0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhJ10gPSB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcblxuICAgIH1cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG4kKCcjcmFuZ2VfdmFsJykub24oJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gKCQodGhpcykudmFsKCkhIGFzIG51bWJlcilcbiAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQWZ0ZXIgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciBjdXJyZW50IHRydXN0IGluIHRoZSBBSTogJHt1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsICogMTB9IC8gMTAwLmApXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbn0pO1xuXG5mdW5jdGlvbiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCA9IERhdGUubm93KClcbiAgICBpbml0aWFsX3VzZXJfZGVjaXNpb24gPSBvcHRpb25cbiAgICBhc3NlcnQob3B0aW9uID09IDEgfHwgb3B0aW9uID09IDIgfHwgb3B0aW9uID09IDMgfHwgb3B0aW9uID09IDQsIFwiSW52YWxpZCBvcHRpb24hXCIpXG5cbiAgICAvLyBSZW1vdmUgYWN0aXZlZGVjaXNpb24gZm9yIGFsbCBidXR0b25zIGV4Y2VwdCB0aGUgc2VsZWN0ZWQgb25lXG4gICAgJChgI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbiR7b3B0aW9ufWApLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT0gb3B0aW9uKSB7XG4gICAgICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICB9XG4gICAgICAgICQoYCNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBpbml0aWFsIGRlY2lzaW9uOiBPcHRpb24gXCIsIG9wdGlvbilcbiAgICBcbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMikpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjNcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigzKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uNFwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDQpKVxuXG5mdW5jdGlvbiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UgPSBjb25mX2xldmVsXG4gICAgYXNzZXJ0KGNvbmZfbGV2ZWwgPT0gMSB8fCBjb25mX2xldmVsID09IDIgfHwgY29uZl9sZXZlbCA9PSAzLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIC8vIFJlbW92ZSBhY3RpdmVkZWNpc2lvbiBmb3IgYWxsIGJ1dHRvbnMgZXhjZXB0IHRoZSBzZWxlY3RlZCBvbmUuIERpc2FibGUgYWxsIGJ1dHRvbnMuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9IGNvbmZfbGV2ZWwpIHtcbiAgICAgICAgICAgICQoYCNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2NvbmZfbGV2ZWx9YCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb240XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcblxuICAgIGdldF9haV9hc3Npc3RhbmNlKClcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMikpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgzKSlcblxuXG5cbmFzeW5jIGZ1bmN0aW9uIGdldF91c2VyX2RlY2lzaW9uX3Byb2IoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dHMgZm9yIHRoZSB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cblxuICAgIGxldCByZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF91c2VyX2RlY2lzaW9uX3Byb2JcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwibWVkaWNhbC1kaWFnbm9zaXMtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCI6IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzLCBcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZFwiOiByZXN1bHRbXCJwcmVkX3Byb2JzXCJdWzBdWzFdXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dCB2YXJpYWJsZXMgZm9yIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgIH1cbiAgICBsZXQgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcImFpX2NvbmZpZGVuY2VcIjogYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiVXNlciBkZWNpc2lvbiBtb2RlbCBpbnB1dHM6IFwiLCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cylcblxuICAgIGxldCBhbGRpZmZfcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICBhbGRpZmZfcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIm1lZGljYWwtZGlhZ25vc2lzLXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICByZXR1cm4gYWxkaWZmX3Jlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kX2Jlc3RfYWljb25mX3RvX2Rpc3BsYXkodXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXQgdmFyaWFibGVzIGZvciB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IGZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgICAgICBcInVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3RcIjogdXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCxcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgZmluZG5ld2NvbmZfcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIm1lZGljYWwtZGlhZ25vc2lzLXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmRuZXdjb25mX3Jlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRfYWlfYXNzaXN0YW5jZSgpIHtcbiAgICBjb25zb2xlLmxvZyhcIkdldHRpbmcgQUkgYXNzaXN0YW5jZS4uLlwiKVxuXG4gICAgbGV0IGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyB1c2VyIHJlcG9ydGVkIHRydXN0IHZhbHVlOiBcIiwgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICB9XG4gICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XG4gICAgICAgIFwiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogZmFsc2UsIFxuICAgICAgICBcInRydXN0X2xldmVsX2F0X3N0YXJ0X29mX2ludGVyYWN0aW9uXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbFxuICAgIFxuICAgIH1cblxuICAgIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJub25lXCIgfHwgKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKSkge1xuICAgICAgICAvLyBObyBpbnRlcnZlbnRpb24sIGp1c3Qgc2hvdyB0aGUgQUkgYXNzaXN0YW5jZSB0aGF0IGlzIGFscmVhZHkgcG9wdWxhdGVkIGluIHRoZSBzcGFuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGFwcGx5aW5nIGFueSBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX21hbmlwXCIpIHtcbiAgICAgICAgLy8gTW9kaWZ5IEFJIGNvbmZpZGVuY2VcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fCBcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBjb25maWRlbmNlIG1hbmlwdWxhdGlvbiBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImZpeGVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIHRvIEFJJ3MgY29uZmlkZW5jZVxuICAgICAgICAgICAgICAgIC8vIChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgY2FuIGJlIG5lZ2F0aXZlKVxuICAgICAgICAgICAgICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgICAgICAgICAgICAgbGV0IG5ld19jb25maWRlbmNlID0gTWF0aC5taW4oMSwgYWlfY29uZmlkZW5jZSArIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbiAgICAgICAgICAgICAgICBuZXdfY29uZmlkZW5jZSA9IE1hdGgubWF4KDAuNSwgbmV3X2NvbmZpZGVuY2UpXG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBTdHJpbmcoKCBuZXdfY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgwKSkgKyBcIiVcIlxuICAgICAgICAgICAgICAgIGxldCBjb25maWRlbmNlX2NoYW5nZSA9IChuZXdfY29uZmlkZW5jZSAtIGFpX2NvbmZpZGVuY2UpLnRvRml4ZWQoMilcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjdHVhbCBBSSBjb25maWRlbmNlOiBcIiwgcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSwgXCIsIENvbmZpZGVuY2Ugc2hvd24gdG8gdXNlcjogXCIsIGRpc3BsYXllZF9haV9jb25maWRlbmNlKVxuXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2FjdHVhbFwiXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfZGlzcGxheWVkXCJdID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfY2hhbmdlXCJdID0gY29uZmlkZW5jZV9jaGFuZ2VcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZGl0aW9ucyBmb3IgYXBwbHlpbmcgJ2NvbmZpZGVuY2UgbWFuaXB1bGF0aW9uJyBpbnRlcnZlbnRpb24gbm90IHNhdGlzZmllZC5cIilcbiAgICAgICAgfVxuXG4gICAgfSBcbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9leHBsYW5hdGlvblwiKSB7XG4gICAgICAgIC8vIEFkZCBBSSBleHBsYW5hdGlvblxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZXhwbGFuYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fc3BhblwiKS5odG1sKGV4cGxhbmF0aW9uX3Nob3duKVxuICAgICAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiZXhwbGFuYXRpb25fc2hvd25cIl0gPSBleHBsYW5hdGlvbl9zaG93blxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhaV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTUsIGFpX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9uc19maW5hbGRlY2lzaW9uLCBudWxsLCBcIlBsZWFzZSByZWFkIHRoZSBleHBsYW5hdGlvbi5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGFkYXB0aXZlIHN0cmF0ZWd5XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZGl0aW9ucyBmb3IgYXBwbHlpbmcgJ0FJIGV4cGxhbmF0aW9uJyBpbnRlcnZlbnRpb24gbm90IHNhdGlzZmllZC5cIilcbiAgICAgICAgfVxuXG4gICAgfVxuICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCIpIHtcbiAgICAgICAgLy8gQWRkIEFJIGV4cGxhbmF0aW9uXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm5vbmVcIikgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBleHBsYW5hdGlvbiBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImZpeGVkXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNob3dpbmcgZXhwbGFuYXRpb25cIilcbiAgICAgICAgICAgICAgICBsZXQgZXhwbGFuYXRpb25fc2hvd246IHN0cmluZyA9ICFxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXSA/IFwiTm8gZXhwbGFuYXRpb24gcHJvdmlkZWRcIiA6IHF1ZXN0aW9uIVtcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCJdXG4gICAgICAgICAgICAgICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9zcGFuXCIpLmh0bWwoZXhwbGFuYXRpb25fc2hvd24pXG4gICAgICAgICAgICAgICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXZcIikuc2hvdygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJleHBsYW5hdGlvbl9zaG93blwiXSA9IGV4cGxhbmF0aW9uX3Nob3duXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IHRydWVcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lcigxNSwgYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2LCBidXR0b25zX2ZpbmFsZGVjaXNpb24sIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25kaXRpb25zIGZvciBhcHBseWluZyAnQUkgZXhwbGFuYXRpb24nIGludGVydmVudGlvbiBub3Qgc2F0aXNmaWVkLlwiKVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYm90aF9leHBsYW5hdGlvbl90eXBlc1wiKSB7XG4gICAgICAgIGFzc2VydCAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3RcIiwgXCJHb2FsIGZvciAnYm90aCBleHBsYW5hdGlvbiB0eXBlcycgaW50ZXJ2ZW50aW9uIHNob3VsZCBiZSAnbWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3QnXCIpXG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIGV4cGxhbmF0aW9uIGludGVydmVudGlvbiBmb3IgdW5kZXJ0cnVzdFwiKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICBsZXQgZXhwbGFuYXRpb25fc2hvd246IHN0cmluZyA9ICFxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXSA/IFwiTm8gZXhwbGFuYXRpb24gcHJvdmlkZWRcIiA6IHF1ZXN0aW9uIVtcImFpX2V4cGxhbmF0aW9uXCJdXG4gICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgIGNvbnN0IGFpX2V4cGxhbmF0aW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlfZXhwbGFuYXRpb25fZGl2XCIpXG4gICAgICAgICAgICBzdGFydFRpbWVyKDE1LCBhaV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnNfZmluYWxkZWNpc2lvbiwgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIGNvbnRyYXN0aXZlIGV4cGxhbmF0aW9uIGludGVydmVudGlvbiBmb3Igb3ZlcnRydXN0XCIpXG4gICAgICAgICAgICBsZXQgZXhwbGFuYXRpb25fc2hvd246IHN0cmluZyA9ICFxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXSA/IFwiTm8gZXhwbGFuYXRpb24gcHJvdmlkZWRcIiA6IHF1ZXN0aW9uIVtcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCJdXG4gICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICQoXCIjYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgIGNvbnN0IGFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpXG4gICAgICAgICAgICBzdGFydFRpbWVyKDE1LCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnNfZmluYWxkZWNpc2lvbiwgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG5cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy9pbnRlcnZlbnRpb25fZGV0YWlsc1snYWN0dWFsX2FpX2NvbmZpZGVuY2UnXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAvL2ludGVydmVudGlvbl9kZXRhaWxzWydkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSddID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICBjb25zb2xlLmxvZyhcIkFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIERldGFpbHM6IFwiLCBpbnRlcnZlbnRpb25fZGV0YWlscylcblxuICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UpXG5cbiAgICAkKFwiI2FpX2Fzc2lzdGFuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjZmluYWxfdXNlcl9kZWNpc2lvbl9kaXZcIikuc2hvdygpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF90cnVzdF9lZmZlY3QoKSB7XG4gICAgLy8gR2V0IHRydXN0IGVmZmVjdCBmb3IgdGhpcyBpbnRlcmFjdGlvblxuICAgIGxldCBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBhaV9jb3JyZWN0bmVzcyA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBmaW5hbF91c2VyX2NvcnJlY3RuZXNzID0gTnVtYmVyKGZpbmFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdHJ1c3RfZWZmZWN0X2lucHV0cyA9IHtcbiAgICAgICAgXCJpbml0aWFsX3VzZXJfY29ycmVjdG5lc3NcIjogaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvcnJlY3RuZXNzXCI6IGFpX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImZpbmFsX3VzZXJfY29ycmVjdG5lc3NcIjogZmluYWxfdXNlcl9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgaW5wdXRzOiBcIiwgdHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICAvL2xldCB0cnVzdF9lZmZlY3QgPSBnZXRfdXNlcl90cnVzdF9lZmZlY3QodHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdHJ1c3RfZWZmZWN0XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIm1lZGljYWwtZGlhZ25vc2lzLXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHRydXN0X2VmZmVjdF9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodHJ1c3RfZWZmZWN0X2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgcHJlZGljdGlvbiByZXN1bHQ6IFwiLCByZXN1bHQpXG4gICAgbGV0IHRydXN0X2VmZmVjdCA9IGF3YWl0IHJlc3VsdFtcInRydXN0X2VmZmVjdFwiXVxuXG4gICAgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgKyB0cnVzdF9lZmZlY3RcbiAgICB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge1xuICAgICAgICBcIm1vZGVsX2lucHV0c1wiOiB0cnVzdF9lZmZlY3RfaW5wdXRzLFxuICAgICAgICBcInByZWRpY3RlZF90cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICBcInVzZXJfbmV3X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgfVxuICAgIHJldHVybiB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG59XG5cbmZ1bmN0aW9uIG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiB8fCBvcHRpb24gPT0gMyB8fCBvcHRpb24gPT0gNCwgXCJJbnZhbGlkIG9wdGlvbiFcIilcblxuICAgIC8vIFJlbW92ZSBhY3RpdmVkZWNpc2lvbiBmb3IgYWxsIGJ1dHRvbnMgZXhjZXB0IHRoZSBzZWxlY3RlZCBvbmVcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT0gb3B0aW9uKSB7XG4gICAgICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoYCNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uJHtvcHRpb259YCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuXG4gICAgJChcIiNmaW5hbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxufVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMikpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDMpKVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uNFwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbig0KSlcblxuZnVuY3Rpb24gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZShjb25mX2xldmVsKSB7XG4gICAgdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCA9IERhdGUubm93KClcbiAgICBmaW5hbF91c2VyX2NvbmZpZGVuY2UgPSBjb25mX2xldmVsXG4gICAgYXNzZXJ0KGNvbmZfbGV2ZWwgPT0gMSB8fCBjb25mX2xldmVsID09IDIgfHwgY29uZl9sZXZlbCA9PSAzLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIC8vIFJlbW92ZSBhY3RpdmVkZWNpc2lvbiBmb3IgYWxsIGJ1dHRvbnMgZXhjZXB0IHRoZSBzZWxlY3RlZCBvbmVcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT0gY29uZl9sZXZlbCkge1xuICAgICAgICAgICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7Y29uZl9sZXZlbH1gKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG5cbiAgICBzaG93X3Jlc3VsdCgpXG59XG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuYXN5bmMgZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cbiAgICBsZXQgY29ycmVjdF9vcHRpb246IG51bWJlciA9IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdXG4gICAgbGV0IGNvcnJlY3Rfb3B0aW9uX3N0cjogc3RyaW5nID0gcXVlc3Rpb24hW2BvcHRpb24ke2NvcnJlY3Rfb3B0aW9ufWBdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGNvcnJlY3Rfb3B0aW9uID09IGZpbmFsX3VzZXJfZGVjaXNpb25cblxuICAgIGxldCBhaV9pc19jb3JyZWN0OiBib29sZWFuID0gcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXVxuICAgIGxldCBtZXNzYWdlID0gXCJDb3JyZWN0IGFuc3dlcjogPGI+T3B0aW9uIFwiICsgY29ycmVjdF9vcHRpb24gKyBcIjogXCIgKyBjb3JyZWN0X29wdGlvbl9zdHIgKyBcIjwvYj4uPGJyPlwiXG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmIChhaV9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgICAgICBiYWxhbmNlICs9IDAuMVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPllvdSBkbyBub3QgcmVjZWl2ZSBhbnkgcmV3YXJkLjwvYj48L3NwYW4+XCJcbiAgICB9XG5cbiAgICBtZXNzYWdlICs9IFwiPGJyPlwiXG4gICAgLy9pZiAoc3VjY2Vzcykge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBnYWluICQkeyhiZXRfdmFsKmJldF92YWxfcmF0aW8pLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlICs9IGJldF92YWwqYmV0X3ZhbF9yYXRpb1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgbG9zZSAkJHsoYmV0X3ZhbC8xLjApLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlIC09IGJldF92YWwvMS4wXG4gICAgLy8gICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgLy99XG4gICAgJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMi4wYClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmh0bWwobWVzc2FnZSlcbiAgICAvLyQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICBpZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcpICAge1xuICAgICAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuc2hvdygpXG4gICAgfVxuXG4gICAgLy90cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0gYXdhaXQgZ2V0X3RydXN0X2VmZmVjdCgpXG5cbiAgICAvLyQoJyNyYW5nZV92YWwnKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG59XG5cbi8vJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLm9uKFwiY2xpY2tcIiwgc2hvd19yZXN1bHQpXG5cbmZ1bmN0aW9uIHN0YXJ0X3RpbWVyX2Zvcl9pbml0aWFsX2RlY2lzaW9uKCkge1xuICAgIHN0YXJ0VGltZXIoMTAsIGluaXRpYWxfdXNlcl9kZWNpc2lvbl9kaXYsIGJ1dHRvbnNfaW5pdGlhbGRlY2lzaW9uLCBudWxsLCBcIlBsZWFzZSByZWFkIHRoZSBzeW1wdG9tcyBhbmQgb3B0aW9ucyBjbG9zZWx5LlwiKVxufVxuXG5cbmZ1bmN0aW9uIG5leHRfcXVlc3Rpb24oKSB7XG4gICAgLy8gcmVzdG9yZSBwcmV2aW91cyBzdGF0ZSBvZiBVSVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDQ7IGkrKykge1xuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChgI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSB7XG4gICAgICAgICQoYCNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChgI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJCgnI3JhbmdlX3ZhbCcpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjdXNlcl90cnVzdF9yZXBvcnRfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLmhpZGUoKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaGlkZSgpXG4gICAgaWYgKHF1ZXN0aW9uX2kgPT0gLTEpIHtcbiAgICAgICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoXCItXCIpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQmVmb3JlIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgdHJ1c3QgaW4gdGhlIEFJOiAke3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgKiAxMH0gLyAxMDAuYClcbiAgICB9XG4gICAgJChcIiNyYW5nZV92YWxcIikudmFsKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbFxuXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kX21vY2tcIikuc2hvdygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlc3Rpb24gPSBkYXRhW3F1ZXN0aW9uX2ldXG5cbiAgICAkKFwiI3F1ZXN0aW9uX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJxdWVzdGlvblwiXSlcbiAgICAkKFwiI29wdGlvbjFfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjFcIl0pXG4gICAgJChcIiNvcHRpb24yX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJvcHRpb24yXCJdKVxuICAgICQoXCIjb3B0aW9uM19zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uM1wiXSlcbiAgICAkKFwiI29wdGlvbjRfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjRcIl0pXG4gICAgLy8kKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAvLyQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSlcblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICBpZihxdWVzdGlvbi5oYXNPd25Qcm9wZXJ0eShcInJld2FyZF9yYXRpb1wiKSkge1xuICAgICAgICBsZXQgW3JhdGlvMSwgcmF0aW8yXSA9IHF1ZXN0aW9uW1wicmV3YXJkX3JhdGlvXCJdXG4gICAgICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgICAgIHJhdGlvMiA9IE51bWJlcihyYXRpbzIpXG4gICAgICAgIGJldF92YWxfcmF0aW8gPSByYXRpbzEvcmF0aW8yXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IDFcbiAgICB9XG5cbiAgICB0aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxuXG4gICAgc3RhcnRfdGltZXJfZm9yX2luaXRpYWxfZGVjaXNpb24oKVxufVxuXG4vLyBnZXQgdXNlciBpZCBhbmQgbG9hZCBxdWV1ZVxuLy8gdHJ5IHRvIHNlZSBpZiBzdGFydCBvdmVycmlkZSB3YXMgcGFzc2VkXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3Qgc3RhcnRPdmVycmlkZSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJ0Jyk7XG5jb25zdCBVSURGcm9tVVJMID0gdXJsUGFyYW1zLmdldChcInVpZFwiKVxuZ2xvYmFsVGhpcy51cmxfZGF0YSA9IHBhcmFtc1RvT2JqZWN0KHVybFBhcmFtcy5lbnRyaWVzKCkpXG5cbmlmIChVSURGcm9tVVJMICE9IG51bGwpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJREZyb21VUkwgYXMgc3RyaW5nXG4gICAgaWYgKGdsb2JhbFRoaXMudWlkID09IFwicHJvbGlmaWNfcmFuZG9tXCIpIHtcbiAgICAgICAgbGV0IHF1ZXVlX2lkID0gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfWAucGFkU3RhcnQoMywgXCIwXCIpXG4gICAgICAgIGdsb2JhbFRoaXMudWlkID0gYCR7dXJsUGFyYW1zLmdldChcInByb2xpZmljX3F1ZXVlX25hbWVcIil9LyR7cXVldWVfaWR9YFxuICAgIH1cbn0gZWxzZSBpZiAoREVWTU9ERSkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gXCJkZW1vXCJcbn0gZWxzZSB7XG4gICAgbGV0IFVJRF9tYXliZTogYW55ID0gbnVsbFxuICAgIHdoaWxlIChVSURfbWF5YmUgPT0gbnVsbCkge1xuICAgICAgICBVSURfbWF5YmUgPSBwcm9tcHQoXCJFbnRlciB5b3VyIHVzZXIgaWQuIFBsZWFzZSBnZXQgaW4gdG91Y2ggaWYgeW91IHdlcmUgbm90IGFzc2lnbmVkIGFuIGlkIGJ1dCB3aXNoIHRvIHBhcnRpY2lwYXRlIGluIHRoaXMgZXhwZXJpbWVudC5cIilcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURfbWF5YmUhXG59XG5cblxubGV0IGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwczogbnVtYmVyW10gPSBbXVxuaWYgKGdsb2JhbFRoaXMudWlkLmluY2x1ZGVzKFwiMzQzXCIpKSB7XG4gICAgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzID0gWzcsIDgsIDksIDE3LCAxOCwgMTksIDI3LCAyOCwgMjldXG59IGVsc2UgaWYgKGdsb2JhbFRoaXMudWlkLmluY2x1ZGVzKFwiNDM0XCIpKSB7XG4gICAgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzID0gWzcsIDgsIDksIDE3LCAxOCwgMTksIDI3LCAyOCwgMjldXG59IGVsc2UgaWYgKGdsb2JhbFRoaXMudWlkLmluY2x1ZGVzKFwiNzM1XCIpKSB7XG4gICAgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzID0gWzEwLCAxMSwgMTIsIDEzLCAxNCwgMjUsIDI2LCAyNywgMjgsIDI5XVxufVxuXG4vL2NvbnN0IHZhbGlkQUlJbnRlcnZlbnRpb25zID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9pbmZsYXRpb25cIiwgXCJjb25maWRlbmNlX2luZmxhdGlvbl9maXhlZFwiLCBcImNvbmZpZGVuY2VfZGVmbGF0aW9uXCJdXG4vL2xldCBBSUludGVydmVudGlvblR5cGUgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3R5cGVcIilcbi8vbGV0IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiKSlcbi8vbGV0IEludGVydmVudGlvbkZpeGVkQ29uZkluY3JlYXNlID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZml4ZWRjb25maW5jcmVhc2VcIikpXG5jb25zdCB2YWxpZEludGVydmVudGlvbkdvYWxzID0gW1wibm9uZVwiLCBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiwgXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiwgXCJtaXRpZ2F0ZV91bmRlcmFuZG92ZXJ0cnVzdFwiXVxubGV0IEFJSW50ZXJ2ZW50aW9uR29hbCA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZ29hbFwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25Hb2FsID0gXCJub25lXCJ9XG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uR29hbHMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25Hb2FsISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIEdvYWw6IFwiICsgQUlJbnRlcnZlbnRpb25Hb2FsKVxufVxuXG5jb25zdCB2YWxpZEludGVydmVudGlvblR5cGVzID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9tYW5pcFwiLCBcImFpX2V4cGxhbmF0aW9uXCIsIFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIiwgXCJib3RoX2V4cGxhbmF0aW9uX3R5cGVzXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25UeXBlID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90eXBlXCIpXG5pZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IG51bGwpIHtBSUludGVydmVudGlvblR5cGUgPSBcIm5vbmVcIn0gXG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uVHlwZXMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25UeXBlISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uOiBcIiArIEFJSW50ZXJ2ZW50aW9uVHlwZSlcbn1cblxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25TdHJhdGVnaWVzID0gW1wiZHVtbXlcIiwgXCJmaXhlZFwiLCBcImFkYXB0aXZlXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fc3RyYXRlZ3lcIilcbmlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IG51bGwpIHtBSUludGVydmVudGlvblN0cmF0ZWd5ID0gXCJkdW1teVwifVxuaWYgKCF2YWxpZEludGVydmVudGlvblN0cmF0ZWdpZXMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25TdHJhdGVneSEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbiBTdHJhdGVneTogXCIgKyBBSUludGVydmVudGlvblN0cmF0ZWd5KVxufVxuXG4vLyBJbnRlcnZlbnRpb24tc3BlY2lmaWMgcGFyYW1ldGVyc1xubGV0IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiKSlcbmlmIChJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPT0gbnVsbCkge0ludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IC0xfVxubGV0IEludGVydmVudGlvblRydXN0VGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdHJ1c3RfdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvblRydXN0VGhyZXNob2xkID09IG51bGwpIHtJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA9IDB9XG5sZXQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZml4ZWRjb25mY2hhbmdlXCIpKVxuaWYgKEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID0gMH1cbmxldCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdW5kZXJ0cnVzdF90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCA9IEludGVydmVudGlvblRydXN0VGhyZXNob2xkfVxubGV0IEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX292ZXJ0cnVzdF90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkID09IG51bGwpIHtJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQgPSBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZH1cblxuXG5sZXQgdXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwgPSB1cmxQYXJhbXMuZ2V0KFwidXNlX3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWxcIikgPT0gXCJ0cnVlXCJcbmlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCA9PSBudWxsKSB7dXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwgPSBmYWxzZX1cblxubGV0IHNraXBfdHJ1c3RfcmVwb3J0aW5nID0gdXJsUGFyYW1zLmdldChcInNraXBfdHJ1c3RfcmVwb3J0aW5nXCIpID09IFwidHJ1ZVwiXG5pZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcgPT0gbnVsbCkge3NraXBfdHJ1c3RfcmVwb3J0aW5nID0gZmFsc2V9XG5cbmNvbnNvbGUubG9nKFwiQUlJbnRlcnZlbnRpb25Hb2FsOiBcIiwgQUlJbnRlcnZlbnRpb25Hb2FsKVxuY29uc29sZS5sb2coXCJBSUludGVydmVudGlvblR5cGU6IFwiLCBBSUludGVydmVudGlvblR5cGUpXG5jb25zb2xlLmxvZyhcIkFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3k6IFwiLCBBSUludGVydmVudGlvblN0cmF0ZWd5KVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvblRydXN0VGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZTogXCIsIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbmNvbnNvbGUubG9nKFwidXNlVXNlclJlcG9ydGVkVHJ1c3RWYWw6IFwiLCB1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbClcbmNvbnNvbGUubG9nKFwic2tpcF90cnVzdF9yZXBvcnRpbmc6IFwiLCBza2lwX3RydXN0X3JlcG9ydGluZylcblxuaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIikge1xuICAgIGFzc2VydChJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA8PSAwLCBcIlRydXN0IHRocmVzaG9sZCBmb3IgbWl0aWdhdGluZyB1bmRlcnRydXN0IGNhbm5vdCBiZSBwb3NpdGl2ZS5cIilcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID49IDAsIFwiQ29uZmlkZW5jZSBjaGFuZ2UgZm9yIG1pdGlnYXRpbmcgdW5kZXJ0cnVzdCBjYW5ub3QgYmUgbmVnYXRpdmUuXCIpXG59IGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiKSB7XG4gICAgYXNzZXJ0KEludGVydmVudGlvblRydXN0VGhyZXNob2xkID49IDAsIFwiVHJ1c3QgdGhyZXNob2xkIGZvciBtaXRpZ2F0aW5nIG92ZXJ0cnVzdCBjYW5ub3QgYmUgbmVnYXRpdmUuXCIpXG4gICAgYXNzZXJ0KEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA8PSAwLCBcIkNvbmZpZGVuY2UgY2hhbmdlIGZvciBtaXRpZ2F0aW5nIG92ZXJ0cnVzdCBjYW5ub3QgYmUgcG9zaXRpdmUuXCIpXG59XG5cbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fZ29hbFwiXSA9IEFJSW50ZXJ2ZW50aW9uR29hbFxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl90eXBlXCJdID0gQUlJbnRlcnZlbnRpb25UeXBlXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3N0cmF0ZWd5XCJdID0gQUlJbnRlcnZlbnRpb25TdHJhdGVneVxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl90aHJlc2hvbGRcIl0gPSBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGRcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fZml4ZWRjb25mY2hhbmdlXCJdID0gSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlXG5nbG9iYWxUaGlzLnVybF9kYXRhW1widXNlX3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWxcIl0gPSB1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbFxuXG4vLyB2ZXJzaW9uIGZvciBwYXBlclxuaWYgKGdsb2JhbFRoaXMudWlkLnN0YXJ0c1dpdGgoXCJkZW1vX3BhcGVyXCIpKSB7XG4gICAgTU9DS01PREUgPSB0cnVlXG59IGVsc2Uge1xuXG59XG5jb25zb2xlLmxvZyhcIlJ1bm5pbmcgd2l0aCBVSURcIiwgZ2xvYmFsVGhpcy51aWQpXG5sb2FkX2RhdGEoKS5jYXRjaCgoX2Vycm9yKSA9PiB7XG4gICAgLy9hbGVydChcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhnbG9iYWxUaGlzLnVpZCEpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59XG4pLnRoZW4oKG5ld19kYXRhKSA9PiB7XG4gICAgZGF0YSA9IG5ld19kYXRhXG4gICAgaWYgKHN0YXJ0T3ZlcnJpZGUgIT0gbnVsbCkge1xuICAgICAgICBxdWVzdGlvbl9pID0gcGFyc2VJbnQoc3RhcnRPdmVycmlkZSkgLSAxXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZnJvbVwiLCBxdWVzdGlvbl9pKVxuICAgIH1cbiAgICAvLyBuZXh0X3F1ZXN0aW9uKClcbiAgICBuZXh0X2luc3RydWN0aW9ucygwKVxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLnNob3coKVxuICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbn0pXG5cbmNvbnNvbGUubG9nKFwiU3RhcnRpbmcgc2Vzc2lvbiB3aXRoIFVJRDpcIiwgZ2xvYmFsVGhpcy51aWQhKVxuXG5sZXQgYWxlcnRfYWN0aXZlID0gZmFsc2VcbmRvY3VtZW50Lm9udmlzaWJpbGl0eWNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAoIWFsZXJ0X2FjdGl2ZSkge1xuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSArPSAxXG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IHRydWVcbiAgICAgICAgaWYgKCEoZ2xvYmFsVGhpcy51aWQhLnN0YXJ0c1dpdGgoXCJkZW1vXCIpKSAmJiAhKERFVk1PREUpKSB7XG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBkb24ndCBsZWF2ZSB0aGUgcGFnZS4gSWYgeW91IGRvIHNvIGFnYWluLCB3ZSBtYXkgcmVzdHJpY3QgcGF5aW5nIHlvdS5cIilcbiAgICAgICAgfVxuICAgICAgICBhbGVydF9hY3RpdmUgPSBmYWxzZVxuICAgIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTRVJWRVJfTE9HX1JPT1QiLCJhY3RpdmVUaW1lciIsInN0YXJ0VGltZXIiLCJkdXJhdGlvbiIsInN0ZXBEaXYiLCJidXR0b25zIiwiY2FsbGJhY2siLCJtZXNzYWdlIiwiY2xlYXJJbnRlcnZhbCIsImZvckVhY2giLCJidXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJ0aW1lckRpc3BsYXkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsInN0eWxlIiwiZm9udFdlaWdodCIsIm1hcmdpblRvcCIsImFwcGVuZENoaWxkIiwicmVtYWluaW5nVGltZSIsInRleHRDb250ZW50Iiwic2V0SW50ZXJ2YWwiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsIk1PQ0tNT0RFIiwiZGF0YSIsInRpbWVfcXVlc3Rpb25fc3RhcnQiLCJ0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0IiwidGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCIsInRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0IiwidGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0IiwicXVlc3Rpb25faSIsInF1ZXN0aW9uIiwiaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwiZmluYWxfdXNlcl9kZWNpc2lvbiIsImluaXRpYWxfdXNlcl9jb25maWRlbmNlIiwiZmluYWxfdXNlcl9jb25maWRlbmNlIiwiYmFsYW5jZSIsInVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwiLCJwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwiLCJiZXRfdmFsX3JhdGlvIiwiaW5zdHJ1Y3Rpb25faSIsImNvdW50X2V4aXRlZF9wYWdlIiwiaW50ZXJ2ZW50aW9uX2RldGFpbHMiLCJ0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhIiwiYnV0dG9uc19pbml0aWFsZGVjaXNpb24iLCJnZXRFbGVtZW50QnlJZCIsImJ1dHRvbnNfZmluYWxkZWNpc2lvbiIsImluaXRpYWxfdXNlcl9kZWNpc2lvbl9kaXYiLCJhc3NlcnQiLCJjb25kaXRpb24iLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsIiQiLCJhdHRyIiwicmVtb3ZlQXR0ciIsInNob3ciLCJ2YWwiLCJoaWRlIiwibmV4dF9xdWVzdGlvbiIsImNoaWxkcmVuIiwiZWFjaCIsIl8iLCJlbCIsIm1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwib3B0aW9uIiwiRGF0ZSIsIm5vdyIsImkiLCJjb25zb2xlIiwibG9nIiwiZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlIiwiY29uZl9sZXZlbCIsImFzeW5jIiwiZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UiLCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwiLCJ1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCIsIkFJSW50ZXJ2ZW50aW9uVHlwZSIsIkFJSW50ZXJ2ZW50aW9uR29hbCIsIkludGVydmVudGlvblRydXN0VGhyZXNob2xkIiwiQUlJbnRlcnZlbnRpb25TdHJhdGVneSIsImFpX2NvbmZpZGVuY2UiLCJOdW1iZXIiLCJyZXBsYWNlIiwibmV3X2NvbmZpZGVuY2UiLCJNYXRoIiwibWluIiwiSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIiwibWF4IiwiU3RyaW5nIiwidG9GaXhlZCIsImNvbmZpZGVuY2VfY2hhbmdlIiwiZXhwbGFuYXRpb25fc2hvd24iLCJodG1sIiwiSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCIsIkludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCIsImdldF9haV9hc3Npc3RhbmNlIiwibWFrZV9maW5hbF91c2VyX2RlY2lzaW9uIiwiZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImNvcnJlY3Rfb3B0aW9uIiwiY29ycmVjdF9vcHRpb25fc3RyIiwidXNlcl9pc19jb3JyZWN0IiwiYWlfaXNfY29ycmVjdCIsInRleHQiLCJza2lwX3RydXN0X3JlcG9ydGluZyIsInNob3dfcmVzdWx0IiwibGVuZ3RoIiwicmF0aW8xIiwicmF0aW8yIiwib24iLCJsb2dnZWRfZGF0YSIsImdsb2JhbFRoaXMiLCJ1cmxfZGF0YSIsInVpZCIsImFqYXgiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvamVjdCIsInBheWxvYWQiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJlIiwibG9nX2RhdGEiLCJ0aGlzIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdGFydE92ZXJyaWRlIiwiVUlERnJvbVVSTCIsImVudHJpZXMiLCJyZXN1bHQiLCJ2YWx1ZSIsInBhcmFtc1RvT2JqZWN0IiwicXVldWVfaWQiLCJmbG9vciIsInJhbmRvbSIsInBhZFN0YXJ0IiwiVUlEX21heWJlIiwicHJvbXB0IiwiaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzIiwiaW5jbHVkZXMiLCJFcnJvciIsIkludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCIsInN0YXJ0c1dpdGgiLCJnZXRKU09OIiwibG9hZF9kYXRhIiwiY2F0Y2giLCJfZXJyb3IiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSIsIm9udmlzaWJpbGl0eWNoYW5nZSIsImFsZXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==