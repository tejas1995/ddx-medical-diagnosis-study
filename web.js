(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{o:()=>i});let t="https://tejassrinivasan.pythonanywhere.com/";var i=!1;let n="https://tejassrinivasan.pythonanywhere.com/",o="user_acceptance_model-logisticregression-0.9347testf1";var c=[];let a,l,_,r,s,d=-1,u=null,p=-1,f=-1,h=-1,b=-1,g=0,v=5,m=1,w=0,k=0,y=0;var A={},x={},O={};let T;function I(e,t){if(!e)throw t||"Assertion failed"}function N(e){w+=e,0==w?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),w>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==w&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),J()),$("#main_box_instructions").children(":not(input)").each(((e,t)=>{$(t).hide()})),$(`#instructions_${w}`).show()}function S(e){r=Date.now(),p=e,I(1==e||2==e||3==e||4==e,"Invalid option!"),$(`#button_initial_decision_option${e}`).attr("activedecision","true");for(let t=1;t<=4;t++)t!=e&&$(`#button_initial_decision_option${t}`).removeAttr("activedecision"),$(`#button_initial_decision_option${t}`).attr("disabled","true");console.log("User's initial decision: Option ",e),$("#initial_user_confidence_div").show(),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function j(e){l=Date.now(),h=e,I(1==e||2==e||3==e,"Invalid option!");for(let t=1;t<=3;t++)t!=e&&$(`#button_initial_confidence_option${t}`).removeAttr("activedecision"),$(`#button_initial_confidence_option${t}`).attr("disabled","true");$(`#button_initial_confidence_option${e}`).attr("activedecision","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_decision_option3").removeAttr("disabled"),$("#button_final_decision_option4").removeAttr("disabled"),async function(){console.log("Getting AI assistance...");let e="AI is figuring out its confidence...",t=y;if(B&&(t=(v-5)/2.5,console.log("Using user reported trust value: ",v)),"none"==F)e=u.ai_confidence;else if("dummy"==F){let t=await async function(){let e=Number(p==u.ai_prediction),t=h,i=Number(u.ai_confidence.replace("%",""))/100,c=y;B&&(c=(v-5)/2.5);let a,l={user_ai_initial_agreement:e,user_initial_confidence:t,ai_confidence:i,user_current_trust_level:c,timestep:d};try{a=await $.ajax(n+"get_user_decision_prob",{data:JSON.stringify({project:"2step-trust-study",model_name:o,payload:JSON.stringify(l)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}return{user_decision_model_inputs:l,user_acceptance_likelihood:a.pred_probs[0][1]}}(),i=t.user_acceptance_likelihood;console.log("User decision model inputs: ",t.user_decision_model_inputs),console.log("User's likelihood of going with the AI's prediction: ",i),e=u.ai_confidence,x={user_decision_model_inputs:t.user_decision_model_inputs,acceptance_likelihood:i}}else if("confidence_inflation"==F)if(t<0){let i=await D(),n=i.al_diff;console.log("User's likelihood of going with the AI's prediction: ",i.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",i.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",n);let o=i.neutral_trust.acceptance_likelihood,c=!1;n>Y?(c=!0,T=await R(o),e=String((100*T.new_conf_to_display).toFixed(0))+"%",x={acceptance_likelihood_results:i,findnewconf_results:T,current_trust_level:t,conf_actual:u.ai_confidence,conf_new:e,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,"acceptance_likelihood-newconf_actualtrust":T.new_conf_acceptance_likelihood,intervention_applied:!0}):(e=u.ai_confidence,c=!1,x={acceptance_likelihood_results:i,current_trust_level:t,conf_actual:u.ai_confidence,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,intervention_applied:!1})}else e=u.ai_confidence,x={intervention_applied:!1};else if("confidence_inflation_fixed"==F)if(t<0&&p!=u.ai_prediction){let i=await D(),n=i.al_diff;console.log("User's likelihood of going with the AI's prediction: ",i.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",i.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",n);let o=Number(u.ai_confidence.replace("%",""))/100,c=Math.min(1,o+M);e=String((100*c).toFixed(0))+"%",x={acceptance_likelihood_results:i,current_trust_level:t,conf_actual:u.ai_confidence,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,intervention_applied:!0}}else e=u.ai_confidence,x={intervention_applied:!1};else if("confidence_deflation"==F)if(t>0){let i=await D(),n=i.al_diff;console.log("User's likelihood of going with the AI's prediction: ",i.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",i.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",n);let o=i.neutral_trust.acceptance_likelihood,c=!1;if(n>Y){c=!0;let n=await R(o);e=String((100*n.new_conf_to_display).toFixed(0))+"%",x={acceptance_likelihood_results:i,findnewconf_results:n,current_trust_level:t,conf_actual:u.ai_confidence,conf_new:e,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,"acceptance_likelihood-newconf_actualtrust":n.new_conf_acceptance_likelihood,intervention_applied:!0}}else e=u.ai_confidence,c=!1,x={acceptance_likelihood_results:i,current_trust_level:t,conf_actual:u.ai_confidence,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,intervention_applied:!1}}else e=u.ai_confidence,x={intervention_applied:!1};x.trust_level_at_start_of_interaction=t,A={intervention_type:F,actual_ai_confidence:u.ai_confidence,displayed_ai_confidence:e,intervention_details:x},console.log("AI Assistance Intervention Data: ",A),$("#ai_prediction_span").html("Option "+u.ai_prediction),$("#ai_confidence_span").html(e),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}async function D(){let e=Number(p==u.ai_prediction),t=h,i=Number(u.ai_confidence.replace("%",""))/100,c=y;B&&(c=(v-5)/2.5);let a,l={user_ai_initial_agreement:e,user_initial_confidence:t,ai_confidence:i,user_current_trust_level:c,timestep:d};console.log("User decision model inputs: ",l);try{a=await $.ajax(n+"examine_effect_of_trust_on_decision_making",{data:JSON.stringify({project:"2step-trust-study",model_name:o,payload:JSON.stringify(l)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}return a}async function R(e){let t=Number(p==u.ai_prediction),i=h,c=(Number(u.ai_confidence.replace("%","")),y);B&&(c=(v-5)/2.5);let a={user_ai_initial_agreement:t,user_initial_confidence:i,user_current_trust_level:c,timestep:d,user_acceptance_likelihood_neutral_trust:e};try{T=await $.ajax(n+"find_best_aiconf_to_display",{data:JSON.stringify({project:"2step-trust-study",model_name:o,payload:JSON.stringify(a)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}return T}function U(e){s=Date.now(),f=e,I(1==e||2==e||3==e||4==e,"Invalid option!");for(let t=1;t<=4;t++)t!=e&&$(`#button_final_decision_option${t}`).removeAttr("activedecision"),$(`#button_final_decision_option${t}`).attr("disabled","true");$(`#button_final_decision_option${e}`).attr("activedecision","true"),$("#final_user_confidence_div").show(),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function P(e){_=Date.now(),b=e,I(1==e||2==e||3==e,"Invalid option!");for(let t=1;t<=3;t++)t!=e&&$(`#button_final_confidence_option${t}`).removeAttr("activedecision"),$(`#button_final_confidence_option${t}`).attr("disabled","true");$(`#button_final_confidence_option${e}`).attr("activedecision","true"),async function(){let e=u.correct_option,t=u[`option${e}`],i=e==f,o=u.ai_is_correct,c="Correct answer: <b>Option "+e+": "+t+"</b>.<br>";c+=i?"You picked Option "+f+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+f+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",c+=o?"The AI picked Option "+u.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+u.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",i?(c+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",g+=.2):c+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",c+="<br>",$("#balance").text(`Balance: $${g.toFixed(2)} + $2.0`),$("#result_span").html(c),$("#result_span").show(),$("#how_confident_div").show(),O=await async function(){let e,t={initial_user_correctness:Number(p==u.correct_option),ai_correctness:Number(u.ai_prediction==u.correct_option),final_user_correctness:Number(f==u.correct_option),ai_confidence:Number(u.ai_confidence.replace("%",""))/100,user_current_trust_level:y,timestep:d};console.log("Trust effect inputs: ",t);try{e=await $.ajax(n+"get_trust_effect",{data:JSON.stringify({project:"2step-trust-study",model_name:"trust_effect_model-svm_linear-0.4644testmae-0.9095testteda",payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}console.log("Trust effect prediction result: ",e);let i=await e.trust_effect;return y+=i,O={model_inputs:t,predicted_trust_effect:i,user_new_trust_level:y}}()}()}function J(){for(let e=1;e<=4;e++)$(`#button_initial_decision_option${e}`).removeAttr("activedecision"),$(`#button_initial_decision_option${e}`).removeAttr("disabled"),$(`#button_final_decision_option${e}`).removeAttr("activedecision"),$(`#button_final_decision_option${e}`).removeAttr("disabled");for(let e=1;e<=3;e++)$(`#button_initial_confidence_option${e}`).removeAttr("activedecision"),$(`#button_initial_confidence_option${e}`).removeAttr("disabled"),$(`#button_final_confidence_option${e}`).removeAttr("activedecision"),$(`#button_final_confidence_option${e}`).removeAttr("disabled");if($("#ai_assistance_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#how_confident_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==d?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*v} / 100.`),$("#range_val").val(v),d+=1,d>=c.length)return $("#main_box_experiment").hide(),void(i?$("#main_box_end_mock").show():$("#main_box_end").show());if(u=c[d],$("#question_span").html(u.question),$("#option1_span").html(u.option1),$("#option2_span").html(u.option2),$("#option3_span").html(u.option3),$("#option4_span").html(u.option4),u.hasOwnProperty("reward_ratio")){let[e,t]=u.reward_ratio;e=Number(e),t=Number(t),m=e/t}else m=1;a=Date.now(),$("#progress").text(`Progress: ${d+1} / ${c.length}`)}$("#button_instructions_next").on("click",(()=>N(1))),$("#button_instructions_prev").on("click",(()=>N(-1))),$("#button_next").on("click",(()=>{if(-1!=d){let e={question_i:d,user_balance_post_interaction:g,user_trust_val:v,initial_user_decision:p,final_user_decision:f,initial_user_confidence:h,final_user_confidence:b};e.times={initial_decision:r-a,initial_confidence:l-r,final_decision:s-l,final_confidence:_-s,trust_decision:Date.now()-_},e.question=u,e.count_exited_page=k,e.ai_assistance_intervention_data=A,e.trust_effect_prediction_data=O,async function(e){if(i)console.log("logged (mock)",e);else{e.url_data=globalThis.url_data,console.log("Data"),"study_id"in e.url_data||(e.url_data.study_id="trialrun_studies"),e.url_data.queue_id=globalThis.uid,console.log("logged",e),console.log("Logging to",t+"log");try{return await $.ajax(t+"log",{data:JSON.stringify({project:"2step-trust-study-interventions/"+e.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+e.url_data.prolific_id,payload:JSON.stringify(e)}),type:"POST",contentType:"application/json"})}catch(e){console.log(e)}}}(e),k=0}J()})),$("#range_val").on("input change",(function(){v=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*v} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>S(1))),$("#button_initial_decision_option2").on("click",(()=>S(2))),$("#button_initial_decision_option3").on("click",(()=>S(3))),$("#button_initial_decision_option4").on("click",(()=>S(4))),$("#button_initial_confidence_option1").on("click",(()=>j(1))),$("#button_initial_confidence_option2").on("click",(()=>j(2))),$("#button_initial_confidence_option3").on("click",(()=>j(3))),$("#button_final_decision_option1").on("click",(()=>U(1))),$("#button_final_decision_option2").on("click",(()=>U(2))),$("#button_final_decision_option3").on("click",(()=>U(3))),$("#button_final_decision_option4").on("click",(()=>U(4))),$("#button_final_confidence_option1").on("click",(()=>P(1))),$("#button_final_confidence_option2").on("click",(()=>P(2))),$("#button_final_confidence_option3").on("click",(()=>P(3)));const q=new URLSearchParams(window.location.search),E=q.get("start"),L=q.get("uid");if(globalThis.url_data=function(e){const t={};for(const[i,n]of e)t[i]=n;return t}(q.entries()),null!=L){if(globalThis.uid=L,"prolific_random"==globalThis.uid){let e=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${q.get("prolific_queue_name")}/${e}`}}else{let e=null;for(;null==e;)e=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=e}let F=q.get("intervention_type"),Y=Number(q.get("intervention_threshold")),M=Number(q.get("intervention_fixedconfincrease")),B="true"==q.get("use_user_reported_trust_level");if(null==F&&(F="none"),null==Y&&(Y=-1),null==M&&(M=0),null==B&&(B=!1),!["none","dummy","confidence_inflation","confidence_inflation_fixed","confidence_deflation"].includes(F))throw new Error("Invalid AI Assistance Intervention: "+F);globalThis.url_data.intervention_type=F,globalThis.url_data.intervention_threshold=Y,globalThis.uid.startsWith("demo_paper")&&(i=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((e=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((e=>{c=e,null!=E&&(d=parseInt(E)-1,console.log("Starting from",d)),N(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let W=!1;document.onvisibilitychange=()=>{W||(k+=1,W=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),W=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNQyxJQUNKckksRUFBT3FJLEVBQ2MsTUFBakJwQixJQUNBM0csRUFBYWdJLFNBQVNyQixHQUFpQixFQUN2Q3RFLFFBQVFDLElBQUksZ0JBQWlCdEMsSUFHakNtQixFQUFrQixHQUNsQkUsRUFBRSwwQkFBMEJHLE9BQzVCSCxFQUFFLGlDQUFpQ0ssTUFBTSxJQUc3Q1csUUFBUUMsSUFBSSw2QkFBOEIyRCxXQUFXRSxLQUVyRCxJQUFJOEIsR0FBZSxFQUNuQkMsU0FBU0MsbUJBQXFCLEtBQ3JCRixJQUNEdkgsR0FBcUIsRUFDckJ1SCxHQUFlLEVBQ1RoQyxXQUFXRSxJQUFLcUIsV0FBVyxTQUM3QlksTUFBTSxnRkFFVkgsR0FBZSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSAnLi9nbG9iYWxzJ1xuaW1wb3J0IHsgTU9DS01PREUgfSBmcm9tICcuL21haW4nXG5cbmxldCBTRVJWRVJfTE9HX1JPT1QgPSBERVZNT0RFID8gXCJodHRwOi8vMTI3LjAuMC4xOjUwMDAvXCIgOiBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZF9kYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gaW5jbHVkZSB0aW1lc3RhbXAgc28gdGhhdCB0aGluZ3MgZG9uJ3QgZ2V0IGNhY2hlZFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmdldEpTT04oXG4gICAgICAgIGBiYWtlZF9xdWV1ZXMvJHtnbG9iYWxUaGlzLnVpZH0uanNvbj90PSR7RGF0ZS5ub3coKX1gLFxuICAgIClcbiAgICByZXR1cm4gcmVzdWx0XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nX2RhdGEoZGF0YSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkIChtb2NrKVwiLCBkYXRhKVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwidHJpYWxydW5fc3R1ZGllc1wiXG4gICAgfVxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXVtcInF1ZXVlX2lkXCJdID0gZ2xvYmFsVGhpcy51aWRcbiAgICBjb25zb2xlLmxvZyhcImxvZ2dlZFwiLCBkYXRhKVxuICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0b1wiLCBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiKVxuXG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5LWludGVydmVudGlvbnMvXCIgKyBkYXRhWyd1cmxfZGF0YSddWydzdHVkeV9pZCddLFxuICAgICAgICAgICAgICAgICAgICB1aWQ6IGdsb2JhbFRoaXMudWlkLnJlcGxhY2UoXCIvXCIsIFwiX1wiKSArIFwiX1wiICsgZGF0YVsndXJsX2RhdGEnXVsncHJvbGlmaWNfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG59IiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gXCIuL2dsb2JhbHNcIlxuZXhwb3J0IHZhciBVSUQ6IHN0cmluZ1xuZXhwb3J0IHZhciBNT0NLTU9ERTogYm9vbGVhbiA9IGZhbHNlXG5pbXBvcnQgeyBsb2FkX2RhdGEsIGxvZ19kYXRhIH0gZnJvbSAnLi9jb25uZWN0b3InXG5pbXBvcnQgeyBwYXJhbXNUb09iamVjdCB9IGZyb20gXCIuL3V0aWxzXCJcbi8vaW1wb3J0IHsgZ2V0X3VzZXJfdHJ1c3RfZWZmZWN0LCBnZXRfYWRqdXN0ZWRfYWlfY29uZmlkZW5jZX0gZnJvbSBcIi4vcnVuX3VzZXJfbW9kZWxzXCJcblxubGV0IFVTRVJfTU9ERUxTX1JPT1QgPSBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxubGV0IHVzZXJfZGVjaXNpb25fbW9kZWwgPSBcInVzZXJfYWNjZXB0YW5jZV9tb2RlbC1sb2dpc3RpY3JlZ3Jlc3Npb24tMC45MzQ3dGVzdGYxXCJcbmxldCB0cnVzdF9lZmZlY3RfbW9kZWwgPSBcInRydXN0X2VmZmVjdF9tb2RlbC1zdm1fbGluZWFyLTAuNDY0NHRlc3RtYWUtMC45MDk1dGVzdHRlZGFcIlxuXG52YXIgZGF0YTogYW55W10gPSBbXVxubGV0IHF1ZXN0aW9uX2kgPSAtMVxubGV0IHF1ZXN0aW9uOiBhbnkgPSBudWxsXG5sZXQgaW5pdGlhbF91c2VyX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGZpbmFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9jb25maWRlbmNlOiBudW1iZXIgPSAtMVxubGV0IGJhbGFuY2UgPSAwXG5sZXQgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbDogbnVtYmVyID0gNVxubGV0IGJldF92YWxfcmF0aW86IG51bWJlciA9IDFcbmxldCB0aW1lX3F1ZXN0aW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0OiBudW1iZXJcbmxldCBpbnN0cnVjdGlvbl9pOiBudW1iZXIgPSAwXG5sZXQgY291bnRfZXhpdGVkX3BhZ2U6IG51bWJlciA9IDBcblxubGV0IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IDBcblxudmFyIGFsbF91c2VyX2ludGVyYWN0aW9ucyA9IFtdXG52YXIgYWlfYXNzaXN0YW5jZV9pbnRlcnZlbnRpb25fZGF0YSA9IHt9XG52YXIgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7fVxudmFyIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7fVxubGV0IGZpbmRuZXdjb25mX3Jlc3VsdDogYW55XG5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB0aHJvdyBtZXNzYWdlIHx8IFwiQXNzZXJ0aW9uIGZhaWxlZFwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbmV4dF9pbnN0cnVjdGlvbnMoaW5jcmVtZW50OiBudW1iZXIpIHtcbiAgICBpbnN0cnVjdGlvbl9pICs9IGluY3JlbWVudFxuXG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gMCkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID49IDYpIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLnNob3coKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS52YWwoXCJTdGFydCBzdHVkeVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiTmV4dFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSA3KSB7XG4gICAgICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLmhpZGUoKVxuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuc2hvdygpXG4gICAgICAgIG5leHRfcXVlc3Rpb24oKVxuICAgIH1cblxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLmNoaWxkcmVuKFwiOm5vdChpbnB1dClcIikuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgICAgJChlbCkuaGlkZSgpXG4gICAgfSlcbiAgICAkKGAjaW5zdHJ1Y3Rpb25zXyR7aW5zdHJ1Y3Rpb25faX1gKS5zaG93KClcbn1cbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoKzEpKVxuJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikub24oXCJjbGlja1wiLCAoKSA9PiBuZXh0X2luc3RydWN0aW9ucygtMSkpXG5cbiQoXCIjYnV0dG9uX25leHRcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfYmFsYW5jZV9wb3N0X2ludGVyYWN0aW9uXCI6IGJhbGFuY2UsXG4gICAgICAgICAgICBcInVzZXJfdHJ1c3RfdmFsXCI6IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9kZWNpc2lvblwiOiBpbml0aWFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfZGVjaXNpb25cIjogZmluYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwiaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcIjogaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UsXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfY29uZmlkZW5jZVwiOiBmaW5hbF91c2VyX2NvbmZpZGVuY2UsXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZWRfZGF0YVsndGltZXMnXSA9IHtcbiAgICAgICAgICAgIFwiaW5pdGlhbF9kZWNpc2lvblwiOiB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCAtIHRpbWVfcXVlc3Rpb25fc3RhcnQsXG4gICAgICAgICAgICBcImluaXRpYWxfY29uZmlkZW5jZVwiOiB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0IC0gdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcImZpbmFsX2RlY2lzaW9uXCI6IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCAtIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQsXG4gICAgICAgICAgICBcImZpbmFsX2NvbmZpZGVuY2VcIjogdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCxcbiAgICAgICAgICAgIFwidHJ1c3RfZGVjaXNpb25cIjogRGF0ZS5ub3coKSAtIHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQsXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ2dlZF9kYXRhWydhaV9hc3Npc3RhbmNlX2ludGVydmVudGlvbl9kYXRhJ10gPSBhaV9hc3Npc3RhbmNlX2ludGVydmVudGlvbl9kYXRhXG4gICAgICAgIGxvZ2dlZF9kYXRhWyd0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhJ10gPSB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcblxuICAgIH1cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG4kKCcjcmFuZ2VfdmFsJykub24oJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gKCQodGhpcykudmFsKCkhIGFzIG51bWJlcilcbiAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQWZ0ZXIgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciBjdXJyZW50IHRydXN0IGluIHRoZSBBSTogJHt1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsICogMTB9IC8gMTAwLmApXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbn0pO1xuXG5mdW5jdGlvbiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCA9IERhdGUubm93KClcbiAgICBpbml0aWFsX3VzZXJfZGVjaXNpb24gPSBvcHRpb25cbiAgICBhc3NlcnQob3B0aW9uID09IDEgfHwgb3B0aW9uID09IDIgfHwgb3B0aW9uID09IDMgfHwgb3B0aW9uID09IDQsIFwiSW52YWxpZCBvcHRpb24hXCIpXG5cbiAgICAvLyBSZW1vdmUgYWN0aXZlZGVjaXNpb24gZm9yIGFsbCBidXR0b25zIGV4Y2VwdCB0aGUgc2VsZWN0ZWQgb25lXG4gICAgJChgI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbiR7b3B0aW9ufWApLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT0gb3B0aW9uKSB7XG4gICAgICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICB9XG4gICAgICAgICQoYCNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBpbml0aWFsIGRlY2lzaW9uOiBPcHRpb24gXCIsIG9wdGlvbilcbiAgICBcbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMikpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjNcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigzKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uNFwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDQpKVxuXG5mdW5jdGlvbiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UgPSBjb25mX2xldmVsXG4gICAgYXNzZXJ0KGNvbmZfbGV2ZWwgPT0gMSB8fCBjb25mX2xldmVsID09IDIgfHwgY29uZl9sZXZlbCA9PSAzLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIC8vIFJlbW92ZSBhY3RpdmVkZWNpc2lvbiBmb3IgYWxsIGJ1dHRvbnMgZXhjZXB0IHRoZSBzZWxlY3RlZCBvbmUuIERpc2FibGUgYWxsIGJ1dHRvbnMuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9IGNvbmZfbGV2ZWwpIHtcbiAgICAgICAgICAgICQoYCNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2NvbmZfbGV2ZWx9YCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb240XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcblxuICAgIGdldF9haV9hc3Npc3RhbmNlKClcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMikpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgzKSlcblxuXG5cbmFzeW5jIGZ1bmN0aW9uIGdldF91c2VyX2RlY2lzaW9uX3Byb2IoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dHMgZm9yIHRoZSB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cblxuICAgIGxldCByZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF91c2VyX2RlY2lzaW9uX3Byb2JcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCI6IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzLCBcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZFwiOiByZXN1bHRbXCJwcmVkX3Byb2JzXCJdWzBdWzFdXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dCB2YXJpYWJsZXMgZm9yIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgIH1cbiAgICBsZXQgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcImFpX2NvbmZpZGVuY2VcIjogYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiVXNlciBkZWNpc2lvbiBtb2RlbCBpbnB1dHM6IFwiLCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cylcblxuICAgIGxldCBhbGRpZmZfcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICBhbGRpZmZfcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICByZXR1cm4gYWxkaWZmX3Jlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kX2Jlc3RfYWljb25mX3RvX2Rpc3BsYXkodXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXQgdmFyaWFibGVzIGZvciB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IGZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgICAgICBcInVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3RcIjogdXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCxcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgZmluZG5ld2NvbmZfcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmRuZXdjb25mX3Jlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRfYWlfYXNzaXN0YW5jZSgpIHtcbiAgICBjb25zb2xlLmxvZyhcIkdldHRpbmcgQUkgYXNzaXN0YW5jZS4uLlwiKVxuXG4gICAgbGV0IGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gXCJBSSBpcyBmaWd1cmluZyBvdXQgaXRzIGNvbmZpZGVuY2UuLi5cIlxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyB1c2VyIHJlcG9ydGVkIHRydXN0IHZhbHVlOiBcIiwgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICB9XG5cbiAgICBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwibm9uZVwiKSB7XG4gICAgICAgIC8vIE5vIGludGVydmVudGlvbiwganVzdCBzaG93IHRoZSBBSSBhc3Npc3RhbmNlIHRoYXQgaXMgYWxyZWFkeSBwb3B1bGF0ZWQgaW4gdGhlIHNwYW5cbiAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG5cbiAgICB9IGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImR1bW15XCIpIHtcbiAgICAgICAgLy8gRHVtbXkgaW50ZXJ2ZW50aW9uLCBqdXN0IHNob3cgdGhlIEFJJ3MgYWN0dWFsIGNvbmZpZGVuY2UgYnV0IGFsc28gZ2V0cyB1c2VyIGFjY2VwdGFuY2UgbGlrZWxpaG9vZCBmcm9tIG1vZGVsXG4gICAgICAgIGxldCB1ZG1fcmVzdWx0ID0gYXdhaXQgZ2V0X3VzZXJfZGVjaXNpb25fcHJvYigpXG4gICAgICAgIGxldCB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZCA9IHVkbV9yZXN1bHRbXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXVxuICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgZGVjaXNpb24gbW9kZWwgaW5wdXRzOiBcIiwgdWRtX3Jlc3VsdFtcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCJdKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBsaWtlbGlob29kIG9mIGdvaW5nIHdpdGggdGhlIEFJJ3MgcHJlZGljdGlvbjogXCIsIHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kKVxuXG4gICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHtcbiAgICAgICAgICAgIFwidXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHNcIjogdWRtX3Jlc3VsdFtcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCJdLFxuICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIjogdXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2QsXG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImNvbmZpZGVuY2VfaW5mbGF0aW9uXCIpIHtcbiAgICAgICAgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IDApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGFsZGlmZl9yZXN1bHQgPSBhd2FpdCBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKSAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGFsX2RpZmYgPSBhbGRpZmZfcmVzdWx0W1wiYWxfZGlmZlwiXVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb246IFwiLCBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb24gd2l0aCBuZXV0cmFsIHRydXN0OiBcIiwgYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjY2VwdGFuY2UgTGlrZWxpaG9vZCBEaWZmOiBcIiwgYWxfZGlmZilcbiAgICAgICAgICAgIGxldCB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0ID0gYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cblxuICAgICAgICAgICAgbGV0IGludGVydmVudGlvbl9hcHBsaWVkID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChhbF9kaWZmID4gSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2FwcGxpZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgLy9GaW5kIG5lYXJlc3QgQUkgY29uZmlkZW5jZSB3aXRoIG1pbmltaXppbmcgQUxEaWZmXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmluZG5ld2NvbmZfcmVzdWx0ID0gYXdhaXQgZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpXG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBTdHJpbmcoKGZpbmRuZXdjb25mX3Jlc3VsdFsnbmV3X2NvbmZfdG9fZGlzcGxheSddICogMTAwKS50b0ZpeGVkKDApKSArIFwiJVwiICAvLyBDb25maWRlbmNlIGluIEFJJ3MgcHJlZGljdGlvblxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZF9yZXN1bHRzXCI6IGFsZGlmZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIFwiZmluZG5ld2NvbmZfcmVzdWx0c1wiOiBmaW5kbmV3Y29uZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIFwiY29uZl9hY3R1YWxcIjogcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJjb25mX25ld1wiOiBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9hY3R1YWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX25ldXRyYWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtbmV3Y29uZl9hY3R1YWx0cnVzdFwiOiBmaW5kbmV3Y29uZl9yZXN1bHRbXCJuZXdfY29uZl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fYXBwbGllZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kX3Jlc3VsdHNcIjogYWxkaWZmX3Jlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgXCJjb25mX2FjdHVhbFwiOiBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX2FjdHVhbHRydXN0XCI6IGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfbmV1dHJhbHRydXN0XCI6IGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImludGVydmVudGlvbl9hcHBsaWVkXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHtcImludGVydmVudGlvbl9hcHBsaWVkXCI6IGZhbHNlfVxuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImNvbmZpZGVuY2VfaW5mbGF0aW9uX2ZpeGVkXCIpIHtcbiAgICAgICAgLy8gSWYgdXNlcidzIGN1cnJlbnQgdHJ1c3QgaXMgbmVnYXRpdmUgYW5kIHRoZSB1c2VyJ3MgaW5pdGlhbCBkZWNpc2lvbiBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgQUkncyBwcmVkaWN0aW9uXG4gICAgICAgIC8vIHRoZW4gaW5mbGF0ZSB0aGUgQUkncyBjb25maWRlbmNlIGJ5IGEgZml4ZWQgYW1vdW50XG5cbiAgICAgICAgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IDAgJiYgaW5pdGlhbF91c2VyX2RlY2lzaW9uICE9IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pIHtcblxuICAgICAgICAgICAgbGV0IGFsZGlmZl9yZXN1bHQgPSBhd2FpdCBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKVxuICAgICAgICAgICAgbGV0IGFsX2RpZmYgPSBhbGRpZmZfcmVzdWx0W1wiYWxfZGlmZlwiXVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb246IFwiLCBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb24gd2l0aCBuZXV0cmFsIHRydXN0OiBcIiwgYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjY2VwdGFuY2UgTGlrZWxpaG9vZCBEaWZmOiBcIiwgYWxfZGlmZilcblxuICAgICAgICAgICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICAgICAgICAgIGxldCBuZXdfY29uZmlkZW5jZSA9IE1hdGgubWluKDEsIGFpX2NvbmZpZGVuY2UgKyBJbnRlcnZlbnRpb25GaXhlZENvbmZJbmNyZWFzZSlcbiAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gU3RyaW5nKCggbmV3X2NvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMCkpICsgXCIlXCJcbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kX3Jlc3VsdHNcIjogYWxkaWZmX3Jlc3VsdCxcbiAgICAgICAgICAgICAgICBcImN1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICAgICAgICAgIFwiY29uZl9hY3R1YWxcIjogcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSxcbiAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX2FjdHVhbHRydXN0XCI6IGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9uZXV0cmFsdHJ1c3RcIjogYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiOiB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XCJpbnRlcnZlbnRpb25fYXBwbGllZFwiOiBmYWxzZX1cbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX2RlZmxhdGlvblwiKSB7XG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICBsZXQgYWxkaWZmX3Jlc3VsdCA9IGF3YWl0IGV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZygpXG4gICAgICAgICAgICBsZXQgYWxfZGlmZiA9IGFsZGlmZl9yZXN1bHRbXCJhbF9kaWZmXCJdXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBsaWtlbGlob29kIG9mIGdvaW5nIHdpdGggdGhlIEFJJ3MgcHJlZGljdGlvbjogXCIsIGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBsaWtlbGlob29kIG9mIGdvaW5nIHdpdGggdGhlIEFJJ3MgcHJlZGljdGlvbiB3aXRoIG5ldXRyYWwgdHJ1c3Q6IFwiLCBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWNjZXB0YW5jZSBMaWtlbGlob29kIERpZmY6IFwiLCBhbF9kaWZmKVxuICAgICAgICAgICAgbGV0IHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QgPSBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXVxuXG4gICAgICAgICAgICBsZXQgaW50ZXJ2ZW50aW9uX2FwcGxpZWQgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKGFsX2RpZmYgPiBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fYXBwbGllZCA9IHRydWVcbiAgICAgICAgICAgICAgICAvL0ZpbmQgbmVhcmVzdCBBSSBjb25maWRlbmNlIHdpdGggbWluaW1pemluZyBBTERpZmZcbiAgICAgICAgICAgICAgICBsZXQgZmluZG5ld2NvbmZfcmVzdWx0ID0gYXdhaXQgZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpXG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBTdHJpbmcoKGZpbmRuZXdjb25mX3Jlc3VsdFsnbmV3X2NvbmZfdG9fZGlzcGxheSddICogMTAwKS50b0ZpeGVkKDApKSArIFwiJVwiICAvLyBDb25maWRlbmNlIGluIEFJJ3MgcHJlZGljdGlvblxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZF9yZXN1bHRzXCI6IGFsZGlmZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIFwiZmluZG5ld2NvbmZfcmVzdWx0c1wiOiBmaW5kbmV3Y29uZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIFwiY29uZl9hY3R1YWxcIjogcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJjb25mX25ld1wiOiBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9hY3R1YWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX25ldXRyYWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtbmV3Y29uZl9hY3R1YWx0cnVzdFwiOiBmaW5kbmV3Y29uZl9yZXN1bHRbXCJuZXdfY29uZl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fYXBwbGllZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kX3Jlc3VsdHNcIjogYWxkaWZmX3Jlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgXCJjb25mX2FjdHVhbFwiOiBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX2FjdHVhbHRydXN0XCI6IGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfbmV1dHJhbHRydXN0XCI6IGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImludGVydmVudGlvbl9hcHBsaWVkXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XCJpbnRlcnZlbnRpb25fYXBwbGllZFwiOiBmYWxzZX1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGludGVydmVudGlvbl9kZXRhaWxzWyd0cnVzdF9sZXZlbF9hdF9zdGFydF9vZl9pbnRlcmFjdGlvbiddID0gdXNlcl9jdXJyZW50X3RydXN0X2xldmVsXG4gICAgYWlfYXNzaXN0YW5jZV9pbnRlcnZlbnRpb25fZGF0YSA9IHtcbiAgICAgICAgXCJpbnRlcnZlbnRpb25fdHlwZVwiOiBBSUludGVydmVudGlvblR5cGUsXG4gICAgICAgIFwiYWN0dWFsX2FpX2NvbmZpZGVuY2VcIjogcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSxcbiAgICAgICAgXCJkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZVwiOiBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJpbnRlcnZlbnRpb25fZGV0YWlsc1wiOiBpbnRlcnZlbnRpb25fZGV0YWlscyxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbiBEYXRhOiBcIiwgYWlfYXNzaXN0YW5jZV9pbnRlcnZlbnRpb25fZGF0YSlcblxuICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UpXG5cbiAgICAkKFwiI2FpX2Fzc2lzdGFuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjZmluYWxfdXNlcl9kZWNpc2lvbl9kaXZcIikuc2hvdygpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF90cnVzdF9lZmZlY3QoKSB7XG4gICAgLy8gR2V0IHRydXN0IGVmZmVjdCBmb3IgdGhpcyBpbnRlcmFjdGlvblxuICAgIGxldCBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBhaV9jb3JyZWN0bmVzcyA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBmaW5hbF91c2VyX2NvcnJlY3RuZXNzID0gTnVtYmVyKGZpbmFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdHJ1c3RfZWZmZWN0X2lucHV0cyA9IHtcbiAgICAgICAgXCJpbml0aWFsX3VzZXJfY29ycmVjdG5lc3NcIjogaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvcnJlY3RuZXNzXCI6IGFpX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImZpbmFsX3VzZXJfY29ycmVjdG5lc3NcIjogZmluYWxfdXNlcl9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgaW5wdXRzOiBcIiwgdHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICAvL2xldCB0cnVzdF9lZmZlY3QgPSBnZXRfdXNlcl90cnVzdF9lZmZlY3QodHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdHJ1c3RfZWZmZWN0XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHRydXN0X2VmZmVjdF9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodHJ1c3RfZWZmZWN0X2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgcHJlZGljdGlvbiByZXN1bHQ6IFwiLCByZXN1bHQpXG4gICAgbGV0IHRydXN0X2VmZmVjdCA9IGF3YWl0IHJlc3VsdFtcInRydXN0X2VmZmVjdFwiXVxuXG4gICAgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgKyB0cnVzdF9lZmZlY3RcbiAgICB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge1xuICAgICAgICBcIm1vZGVsX2lucHV0c1wiOiB0cnVzdF9lZmZlY3RfaW5wdXRzLFxuICAgICAgICBcInByZWRpY3RlZF90cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICBcInVzZXJfbmV3X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgfVxuICAgIHJldHVybiB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG59XG5cbmZ1bmN0aW9uIG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiB8fCBvcHRpb24gPT0gMyB8fCBvcHRpb24gPT0gNCwgXCJJbnZhbGlkIG9wdGlvbiFcIilcblxuICAgIC8vIFJlbW92ZSBhY3RpdmVkZWNpc2lvbiBmb3IgYWxsIGJ1dHRvbnMgZXhjZXB0IHRoZSBzZWxlY3RlZCBvbmVcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT0gb3B0aW9uKSB7XG4gICAgICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoYCNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uJHtvcHRpb259YCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuXG4gICAgJChcIiNmaW5hbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxufVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMikpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDMpKVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uNFwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbig0KSlcblxuZnVuY3Rpb24gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZShjb25mX2xldmVsKSB7XG4gICAgdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCA9IERhdGUubm93KClcbiAgICBmaW5hbF91c2VyX2NvbmZpZGVuY2UgPSBjb25mX2xldmVsXG4gICAgYXNzZXJ0KGNvbmZfbGV2ZWwgPT0gMSB8fCBjb25mX2xldmVsID09IDIgfHwgY29uZl9sZXZlbCA9PSAzLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIC8vIFJlbW92ZSBhY3RpdmVkZWNpc2lvbiBmb3IgYWxsIGJ1dHRvbnMgZXhjZXB0IHRoZSBzZWxlY3RlZCBvbmVcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT0gY29uZl9sZXZlbCkge1xuICAgICAgICAgICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7Y29uZl9sZXZlbH1gKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG5cbiAgICBzaG93X3Jlc3VsdCgpXG59XG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuYXN5bmMgZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cbiAgICBsZXQgY29ycmVjdF9vcHRpb246IG51bWJlciA9IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdXG4gICAgbGV0IGNvcnJlY3Rfb3B0aW9uX3N0cjogc3RyaW5nID0gcXVlc3Rpb24hW2BvcHRpb24ke2NvcnJlY3Rfb3B0aW9ufWBdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGNvcnJlY3Rfb3B0aW9uID09IGZpbmFsX3VzZXJfZGVjaXNpb25cblxuICAgIGxldCBhaV9pc19jb3JyZWN0OiBib29sZWFuID0gcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXVxuICAgIGxldCBtZXNzYWdlID0gXCJDb3JyZWN0IGFuc3dlcjogPGI+T3B0aW9uIFwiICsgY29ycmVjdF9vcHRpb24gKyBcIjogXCIgKyBjb3JyZWN0X29wdGlvbl9zdHIgKyBcIjwvYj4uPGJyPlwiXG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmIChhaV9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgICAgICBiYWxhbmNlICs9IDAuMlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPllvdSBkbyBub3QgcmVjZWl2ZSBhbnkgcmV3YXJkLjwvYj48L3NwYW4+XCJcbiAgICB9XG5cbiAgICBtZXNzYWdlICs9IFwiPGJyPlwiXG4gICAgLy9pZiAoc3VjY2Vzcykge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBnYWluICQkeyhiZXRfdmFsKmJldF92YWxfcmF0aW8pLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlICs9IGJldF92YWwqYmV0X3ZhbF9yYXRpb1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgbG9zZSAkJHsoYmV0X3ZhbC8xLjApLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlIC09IGJldF92YWwvMS4wXG4gICAgLy8gICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgLy99XG4gICAgJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMi4wYClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmh0bWwobWVzc2FnZSlcbiAgICAvLyQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2hvd19jb25maWRlbnRfZGl2XCIpLnNob3coKVxuXG4gICAgdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSA9IGF3YWl0IGdldF90cnVzdF9lZmZlY3QoKVxuXG4gICAgLy8kKCcjcmFuZ2VfdmFsJykuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxufVxuXG4vLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5vbihcImNsaWNrXCIsIHNob3dfcmVzdWx0KVxuXG5mdW5jdGlvbiBuZXh0X3F1ZXN0aW9uKCkge1xuICAgIC8vIHJlc3RvcmUgcHJldmlvdXMgc3RhdGUgb2YgVUlcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgICAgICAgJChgI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChgI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAgICAgJChgI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoYCNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDM7IGkrKykge1xuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoYCNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAgICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICB9XG5cbiAgICAkKFwiI2FpX2Fzc2lzdGFuY2VfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjZmluYWxfdXNlcl9kZWNpc2lvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNmaW5hbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLmhpZGUoKVxuICAgICQoJyNyYW5nZV92YWwnKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2hvd19jb25maWRlbnRfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLmhpZGUoKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaGlkZSgpXG4gICAgaWYgKHF1ZXN0aW9uX2kgPT0gLTEpIHtcbiAgICAgICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoXCItXCIpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQmVmb3JlIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgdHJ1c3QgaW4gdGhlIEFJOiAke3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgKiAxMH0gLyAxMDAuYClcbiAgICB9XG4gICAgJChcIiNyYW5nZV92YWxcIikudmFsKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG5cbiAgICBxdWVzdGlvbl9pICs9IDFcbiAgICBpZiAocXVlc3Rpb25faSA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuaGlkZSgpXG4gICAgICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRfbW9ja1wiKS5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kXCIpLnNob3coKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBxdWVzdGlvbiA9IGRhdGFbcXVlc3Rpb25faV1cblxuICAgICQoXCIjcXVlc3Rpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdKVxuICAgICQoXCIjb3B0aW9uMV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uMVwiXSlcbiAgICAkKFwiI29wdGlvbjJfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjJcIl0pXG4gICAgJChcIiNvcHRpb24zX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJvcHRpb24zXCJdKVxuICAgICQoXCIjb3B0aW9uNF9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uNFwiXSlcbiAgICAvLyQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIC8vJChcIiNhaV9jb25maWRlbmNlX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdKVxuXG4gICAgLy8gc2V0IGJldCB2YWx1ZSByYXRpb1xuICAgIGlmKHF1ZXN0aW9uLmhhc093blByb3BlcnR5KFwicmV3YXJkX3JhdGlvXCIpKSB7XG4gICAgICAgIGxldCBbcmF0aW8xLCByYXRpbzJdID0gcXVlc3Rpb25bXCJyZXdhcmRfcmF0aW9cIl1cbiAgICAgICAgcmF0aW8xID0gTnVtYmVyKHJhdGlvMSlcbiAgICAgICAgcmF0aW8yID0gTnVtYmVyKHJhdGlvMilcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IHJhdGlvMS9yYXRpbzJcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZXRfdmFsX3JhdGlvID0gMVxuICAgIH1cblxuICAgIHRpbWVfcXVlc3Rpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgJChcIiNwcm9ncmVzc1wiKS50ZXh0KGBQcm9ncmVzczogJHtxdWVzdGlvbl9pICsgMX0gLyAke2RhdGEubGVuZ3RofWApXG59XG5cbi8vIGdldCB1c2VyIGlkIGFuZCBsb2FkIHF1ZXVlXG4vLyB0cnkgdG8gc2VlIGlmIHN0YXJ0IG92ZXJyaWRlIHdhcyBwYXNzZWRcbmNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG5jb25zdCBzdGFydE92ZXJyaWRlID0gdXJsUGFyYW1zLmdldCgnc3RhcnQnKTtcbmNvbnN0IFVJREZyb21VUkwgPSB1cmxQYXJhbXMuZ2V0KFwidWlkXCIpXG5nbG9iYWxUaGlzLnVybF9kYXRhID0gcGFyYW1zVG9PYmplY3QodXJsUGFyYW1zLmVudHJpZXMoKSlcblxuaWYgKFVJREZyb21VUkwgIT0gbnVsbCkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gVUlERnJvbVVSTCBhcyBzdHJpbmdcbiAgICBpZiAoZ2xvYmFsVGhpcy51aWQgPT0gXCJwcm9saWZpY19yYW5kb21cIikge1xuICAgICAgICBsZXQgcXVldWVfaWQgPSBgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCl9YC5wYWRTdGFydCgzLCBcIjBcIilcbiAgICAgICAgZ2xvYmFsVGhpcy51aWQgPSBgJHt1cmxQYXJhbXMuZ2V0KFwicHJvbGlmaWNfcXVldWVfbmFtZVwiKX0vJHtxdWV1ZV9pZH1gXG4gICAgfVxufSBlbHNlIGlmIChERVZNT0RFKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBcImRlbW9cIlxufSBlbHNlIHtcbiAgICBsZXQgVUlEX21heWJlOiBhbnkgPSBudWxsXG4gICAgd2hpbGUgKFVJRF9tYXliZSA9PSBudWxsKSB7XG4gICAgICAgIFVJRF9tYXliZSA9IHByb21wdChcIkVudGVyIHlvdXIgdXNlciBpZC4gUGxlYXNlIGdldCBpbiB0b3VjaCBpZiB5b3Ugd2VyZSBub3QgYXNzaWduZWQgYW4gaWQgYnV0IHdpc2ggdG8gcGFydGljaXBhdGUgaW4gdGhpcyBleHBlcmltZW50LlwiKVxuICAgIH1cbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJRF9tYXliZSFcbn1cblxuY29uc3QgdmFsaWRBSUludGVydmVudGlvbnMgPSBbXCJub25lXCIsIFwiZHVtbXlcIiwgXCJjb25maWRlbmNlX2luZmxhdGlvblwiLCBcImNvbmZpZGVuY2VfaW5mbGF0aW9uX2ZpeGVkXCIsIFwiY29uZmlkZW5jZV9kZWZsYXRpb25cIl1cbmxldCBBSUludGVydmVudGlvblR5cGUgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3R5cGVcIilcbmxldCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90aHJlc2hvbGRcIikpXG5sZXQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mSW5jcmVhc2UgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9maXhlZGNvbmZpbmNyZWFzZVwiKSlcbmxldCB1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCA9IHVybFBhcmFtcy5nZXQoXCJ1c2VfdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbFwiKSA9PSBcInRydWVcIlxuaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBudWxsKSB7XG4gICAgQUlJbnRlcnZlbnRpb25UeXBlID0gXCJub25lXCJcbn0gXG5pZiAoSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID09IG51bGwpIHtcbiAgICBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSAtMVxufVxuaWYgKEludGVydmVudGlvbkZpeGVkQ29uZkluY3JlYXNlID09IG51bGwpIHtcbiAgICBJbnRlcnZlbnRpb25GaXhlZENvbmZJbmNyZWFzZSA9IDBcbn1cbmlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCA9PSBudWxsKSB7XG4gICAgdXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwgPSBmYWxzZVxufVxuXG4vL0Fzc2VydCB0aGF0IHRoZSBBSUFzc2lzdGFuY2VJbnRlcnZlbnRpb24gaXMgb25lIG9mIHRoZSB2YWxpZCB2YWx1ZXNcbmlmICghdmFsaWRBSUludGVydmVudGlvbnMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25UeXBlISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uOiBcIiArIEFJSW50ZXJ2ZW50aW9uVHlwZSlcbn1cbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fdHlwZVwiXSA9IEFJSW50ZXJ2ZW50aW9uVHlwZVxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl90aHJlc2hvbGRcIl0gPSBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGRcblxuLy8gdmVyc2lvbiBmb3IgcGFwZXJcbmlmIChnbG9iYWxUaGlzLnVpZC5zdGFydHNXaXRoKFwiZGVtb19wYXBlclwiKSkge1xuICAgIE1PQ0tNT0RFID0gdHJ1ZVxufSBlbHNlIHtcblxufVxuY29uc29sZS5sb2coXCJSdW5uaW5nIHdpdGggVUlEXCIsIGdsb2JhbFRoaXMudWlkKVxubG9hZF9kYXRhKCkuY2F0Y2goKF9lcnJvcikgPT4ge1xuICAgIC8vYWxlcnQoXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coZ2xvYmFsVGhpcy51aWQhKVxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxufVxuKS50aGVuKChuZXdfZGF0YSkgPT4ge1xuICAgIGRhdGEgPSBuZXdfZGF0YVxuICAgIGlmIChzdGFydE92ZXJyaWRlICE9IG51bGwpIHtcbiAgICAgICAgcXVlc3Rpb25faSA9IHBhcnNlSW50KHN0YXJ0T3ZlcnJpZGUpIC0gMVxuICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGZyb21cIiwgcXVlc3Rpb25faSlcbiAgICB9XG4gICAgLy8gbmV4dF9xdWVzdGlvbigpXG4gICAgbmV4dF9pbnN0cnVjdGlvbnMoMClcbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5zaG93KClcbiAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG59KVxuXG5jb25zb2xlLmxvZyhcIlN0YXJ0aW5nIHNlc3Npb24gd2l0aCBVSUQ6XCIsIGdsb2JhbFRoaXMudWlkISlcblxubGV0IGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG5kb2N1bWVudC5vbnZpc2liaWxpdHljaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKCFhbGVydF9hY3RpdmUpIHtcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgKz0gMVxuICAgICAgICBhbGVydF9hY3RpdmUgPSB0cnVlXG4gICAgICAgIGlmICghKGdsb2JhbFRoaXMudWlkIS5zdGFydHNXaXRoKFwiZGVtb1wiKSkgJiYgIShERVZNT0RFKSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgZG9uJ3QgbGVhdmUgdGhlIHBhZ2UuIElmIHlvdSBkbyBzbyBhZ2Fpbiwgd2UgbWF5IHJlc3RyaWN0IHBheWluZyB5b3UuXCIpXG4gICAgICAgIH1cbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59IiwiZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTRVJWRVJfTE9HX1JPT1QiLCJNT0NLTU9ERSIsIlVTRVJfTU9ERUxTX1JPT1QiLCJ1c2VyX2RlY2lzaW9uX21vZGVsIiwiZGF0YSIsInRpbWVfcXVlc3Rpb25fc3RhcnQiLCJ0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0IiwidGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCIsInRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0IiwidGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0IiwicXVlc3Rpb25faSIsInF1ZXN0aW9uIiwiaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwiZmluYWxfdXNlcl9kZWNpc2lvbiIsImluaXRpYWxfdXNlcl9jb25maWRlbmNlIiwiZmluYWxfdXNlcl9jb25maWRlbmNlIiwiYmFsYW5jZSIsInVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwiLCJiZXRfdmFsX3JhdGlvIiwiaW5zdHJ1Y3Rpb25faSIsImNvdW50X2V4aXRlZF9wYWdlIiwidXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCIsImFpX2Fzc2lzdGFuY2VfaW50ZXJ2ZW50aW9uX2RhdGEiLCJpbnRlcnZlbnRpb25fZGV0YWlscyIsInRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEiLCJmaW5kbmV3Y29uZl9yZXN1bHQiLCJhc3NlcnQiLCJjb25kaXRpb24iLCJtZXNzYWdlIiwibmV4dF9pbnN0cnVjdGlvbnMiLCJpbmNyZW1lbnQiLCIkIiwiYXR0ciIsInJlbW92ZUF0dHIiLCJzaG93IiwidmFsIiwiaGlkZSIsIm5leHRfcXVlc3Rpb24iLCJjaGlsZHJlbiIsImVhY2giLCJfIiwiZWwiLCJtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbiIsIm9wdGlvbiIsIkRhdGUiLCJub3ciLCJpIiwiY29uc29sZSIsImxvZyIsImdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImNvbmZfbGV2ZWwiLCJhc3luYyIsImRpc3BsYXllZF9haV9jb25maWRlbmNlIiwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsIiwidXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwiLCJBSUludGVydmVudGlvblR5cGUiLCJ1ZG1fcmVzdWx0IiwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudCIsIk51bWJlciIsInVzZXJfaW5pdGlhbF9jb25maWRlbmNlIiwiYWlfY29uZmlkZW5jZSIsInJlcGxhY2UiLCJyZXN1bHQiLCJ1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyIsImFqYXgiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvamVjdCIsIm1vZGVsX25hbWUiLCJwYXlsb2FkIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZSIsImdldF91c2VyX2RlY2lzaW9uX3Byb2IiLCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZCIsImFsZGlmZl9yZXN1bHQiLCJleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmciLCJhbF9kaWZmIiwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCIsImludGVydmVudGlvbl9hcHBsaWVkIiwiSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkIiwiZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5IiwiU3RyaW5nIiwidG9GaXhlZCIsIm5ld19jb25maWRlbmNlIiwiTWF0aCIsIm1pbiIsIkludGVydmVudGlvbkZpeGVkQ29uZkluY3JlYXNlIiwiaHRtbCIsImdldF9haV9hc3Npc3RhbmNlIiwiZmluZG5ld2NvbmZfaW5wdXRfdmFyaWFibGVzIiwibWFrZV9maW5hbF91c2VyX2RlY2lzaW9uIiwiZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImNvcnJlY3Rfb3B0aW9uIiwiY29ycmVjdF9vcHRpb25fc3RyIiwidXNlcl9pc19jb3JyZWN0IiwiYWlfaXNfY29ycmVjdCIsInRleHQiLCJ0cnVzdF9lZmZlY3RfaW5wdXRzIiwidHJ1c3RfZWZmZWN0IiwiZ2V0X3RydXN0X2VmZmVjdCIsInNob3dfcmVzdWx0IiwibGVuZ3RoIiwicmF0aW8xIiwicmF0aW8yIiwib24iLCJsb2dnZWRfZGF0YSIsImdsb2JhbFRoaXMiLCJ1cmxfZGF0YSIsInVpZCIsImxvZ19kYXRhIiwidGhpcyIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3RhcnRPdmVycmlkZSIsIlVJREZyb21VUkwiLCJlbnRyaWVzIiwidmFsdWUiLCJwYXJhbXNUb09iamVjdCIsInF1ZXVlX2lkIiwiZmxvb3IiLCJyYW5kb20iLCJwYWRTdGFydCIsIlVJRF9tYXliZSIsInByb21wdCIsImluY2x1ZGVzIiwiRXJyb3IiLCJzdGFydHNXaXRoIiwiZ2V0SlNPTiIsImxvYWRfZGF0YSIsImNhdGNoIiwiX2Vycm9yIiwicmVsb2FkIiwidGhlbiIsIm5ld19kYXRhIiwicGFyc2VJbnQiLCJhbGVydF9hY3RpdmUiLCJkb2N1bWVudCIsIm9udmlzaWJpbGl0eWNoYW5nZSIsImFsZXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==