(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{o:()=>i});let t="https://tejassrinivasan.pythonanywhere.com/";var i=!1;let n="https://tejassrinivasan.pythonanywhere.com/",o="user_acceptance_model-logisticregression-0.9347testf1";var c=[];let a,l,_,r,s,d=-1,u=null,p=-1,f=-1,h=-1,b=-1,g=0,m=5,v=1,w=0,k=0,y=0;var A={},x={},O={};let T;function I(e,t){if(!e)throw t||"Assertion failed"}function N(e){w+=e,0==w?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),w>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==w&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),J()),$("#main_box_instructions").children(":not(input)").each(((e,t)=>{$(t).hide()})),$(`#instructions_${w}`).show()}function S(e){r=Date.now(),p=e,I(1==e||2==e||3==e||4==e,"Invalid option!"),$(`#button_initial_decision_option${e}`).attr("activedecision","true");for(let t=1;t<=4;t++)t!=e&&$(`#button_initial_decision_option${t}`).removeAttr("activedecision"),$(`#button_initial_decision_option${t}`).attr("disabled","true");console.log("User's initial decision: Option ",e),$("#initial_user_confidence_div").show(),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function j(e){l=Date.now(),h=e,I(1==e||2==e||3==e,"Invalid option!");for(let t=1;t<=3;t++)t!=e&&$(`#button_initial_confidence_option${t}`).removeAttr("activedecision"),$(`#button_initial_confidence_option${t}`).attr("disabled","true");$(`#button_initial_confidence_option${e}`).attr("activedecision","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_decision_option3").removeAttr("disabled"),$("#button_final_decision_option4").removeAttr("disabled"),async function(){console.log("Getting AI assistance...");let e="AI is figuring out its confidence...",t=y;if(B&&(t=(m-5)/2.5,console.log("Using user reported trust value: ",m)),"none"==F)e=u.ai_confidence;else if("dummy"==F){let t=await async function(){let e=Number(p==u.ai_prediction),t=h,i=Number(u.ai_confidence.replace("%",""))/100,c=y;B&&(c=(m-5)/2.5);let a,l={user_ai_initial_agreement:e,user_initial_confidence:t,ai_confidence:i,user_current_trust_level:c,timestep:d};try{a=await $.ajax(n+"get_user_decision_prob",{data:JSON.stringify({project:"medical-diagnosis-study",model_name:o,payload:JSON.stringify(l)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}return{user_decision_model_inputs:l,user_acceptance_likelihood:a.pred_probs[0][1]}}(),i=t.user_acceptance_likelihood;console.log("User decision model inputs: ",t.user_decision_model_inputs),console.log("User's likelihood of going with the AI's prediction: ",i),e=u.ai_confidence,x={user_decision_model_inputs:t.user_decision_model_inputs,acceptance_likelihood:i}}else if("confidence_inflation"==F)if(t<0){let i=await D(),n=i.al_diff;console.log("User's likelihood of going with the AI's prediction: ",i.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",i.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",n);let o=i.neutral_trust.acceptance_likelihood,c=!1;n>Y?(c=!0,T=await R(o),e=String((100*T.new_conf_to_display).toFixed(0))+"%",x={acceptance_likelihood_results:i,findnewconf_results:T,current_trust_level:t,conf_actual:u.ai_confidence,conf_new:e,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,"acceptance_likelihood-newconf_actualtrust":T.new_conf_acceptance_likelihood,intervention_applied:!0}):(e=u.ai_confidence,c=!1,x={acceptance_likelihood_results:i,current_trust_level:t,conf_actual:u.ai_confidence,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,intervention_applied:!1})}else e=u.ai_confidence,x={intervention_applied:!1};else if("confidence_inflation_fixed"==F)if(t<0&&p!=u.ai_prediction){let i=await D(),n=i.al_diff;console.log("User's likelihood of going with the AI's prediction: ",i.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",i.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",n);let o=Number(u.ai_confidence.replace("%",""))/100,c=Math.min(1,o+M);e=String((100*c).toFixed(0))+"%",x={acceptance_likelihood_results:i,current_trust_level:t,conf_actual:u.ai_confidence,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,intervention_applied:!0}}else e=u.ai_confidence,x={intervention_applied:!1};else if("confidence_deflation"==F)if(t>0){let i=await D(),n=i.al_diff;console.log("User's likelihood of going with the AI's prediction: ",i.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",i.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",n);let o=i.neutral_trust.acceptance_likelihood,c=!1;if(n>Y){c=!0;let n=await R(o);e=String((100*n.new_conf_to_display).toFixed(0))+"%",x={acceptance_likelihood_results:i,findnewconf_results:n,current_trust_level:t,conf_actual:u.ai_confidence,conf_new:e,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,"acceptance_likelihood-newconf_actualtrust":n.new_conf_acceptance_likelihood,intervention_applied:!0}}else e=u.ai_confidence,c=!1,x={acceptance_likelihood_results:i,current_trust_level:t,conf_actual:u.ai_confidence,"acceptance_likelihood-actualconf_actualtrust":i.actual_trust.acceptance_likelihood,"acceptance_likelihood-actualconf_neutraltrust":i.neutral_trust.acceptance_likelihood,intervention_applied:!1}}else e=u.ai_confidence,x={intervention_applied:!1};x.trust_level_at_start_of_interaction=t,A={intervention_type:F,actual_ai_confidence:u.ai_confidence,displayed_ai_confidence:e,intervention_details:x},console.log("AI Assistance Intervention Data: ",A),$("#ai_prediction_span").html("Option "+u.ai_prediction),$("#ai_confidence_span").html(e),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}async function D(){let e=Number(p==u.ai_prediction),t=h,i=Number(u.ai_confidence.replace("%",""))/100,c=y;B&&(c=(m-5)/2.5);let a,l={user_ai_initial_agreement:e,user_initial_confidence:t,ai_confidence:i,user_current_trust_level:c,timestep:d};console.log("User decision model inputs: ",l);try{a=await $.ajax(n+"examine_effect_of_trust_on_decision_making",{data:JSON.stringify({project:"medical-diagnosis-study",model_name:o,payload:JSON.stringify(l)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}return a}async function R(e){let t=Number(p==u.ai_prediction),i=h,c=(Number(u.ai_confidence.replace("%","")),y);B&&(c=(m-5)/2.5);let a={user_ai_initial_agreement:t,user_initial_confidence:i,user_current_trust_level:c,timestep:d,user_acceptance_likelihood_neutral_trust:e};try{T=await $.ajax(n+"find_best_aiconf_to_display",{data:JSON.stringify({project:"medical-diagnosis-study",model_name:o,payload:JSON.stringify(a)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}return T}function U(e){s=Date.now(),f=e,I(1==e||2==e||3==e||4==e,"Invalid option!");for(let t=1;t<=4;t++)t!=e&&$(`#button_final_decision_option${t}`).removeAttr("activedecision"),$(`#button_final_decision_option${t}`).attr("disabled","true");$(`#button_final_decision_option${e}`).attr("activedecision","true"),$("#final_user_confidence_div").show(),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function P(e){_=Date.now(),b=e,I(1==e||2==e||3==e,"Invalid option!");for(let t=1;t<=3;t++)t!=e&&$(`#button_final_confidence_option${t}`).removeAttr("activedecision"),$(`#button_final_confidence_option${t}`).attr("disabled","true");$(`#button_final_confidence_option${e}`).attr("activedecision","true"),async function(){let e=u.correct_option,t=u[`option${e}`],i=e==f,o=u.ai_is_correct,c="Correct answer: <b>Option "+e+": "+t+"</b>.<br>";c+=i?"You picked Option "+f+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+f+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",c+=o?"The AI picked Option "+u.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+u.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",i?(c+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",g+=.1):c+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",c+="<br>",$("#balance").text(`Balance: $${g.toFixed(2)} + $2.0`),$("#result_span").html(c),$("#result_span").show(),$("#how_confident_div").show(),O=await async function(){let e,t={initial_user_correctness:Number(p==u.correct_option),ai_correctness:Number(u.ai_prediction==u.correct_option),final_user_correctness:Number(f==u.correct_option),ai_confidence:Number(u.ai_confidence.replace("%",""))/100,user_current_trust_level:y,timestep:d};console.log("Trust effect inputs: ",t);try{e=await $.ajax(n+"get_trust_effect",{data:JSON.stringify({project:"medical-diagnosis-study",model_name:"trust_effect_model-svm_linear-0.4644testmae-0.9095testteda",payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(e){console.log("ERROR!"),console.log(e)}console.log("Trust effect prediction result: ",e);let i=await e.trust_effect;return y+=i,O={model_inputs:t,predicted_trust_effect:i,user_new_trust_level:y}}()}()}function J(){for(let e=1;e<=4;e++)$(`#button_initial_decision_option${e}`).removeAttr("activedecision"),$(`#button_initial_decision_option${e}`).removeAttr("disabled"),$(`#button_final_decision_option${e}`).removeAttr("activedecision"),$(`#button_final_decision_option${e}`).removeAttr("disabled");for(let e=1;e<=3;e++)$(`#button_initial_confidence_option${e}`).removeAttr("activedecision"),$(`#button_initial_confidence_option${e}`).removeAttr("disabled"),$(`#button_final_confidence_option${e}`).removeAttr("activedecision"),$(`#button_final_confidence_option${e}`).removeAttr("disabled");if($("#ai_assistance_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#how_confident_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==d?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*m} / 100.`),$("#range_val").val(m),d+=1,d>=c.length)return $("#main_box_experiment").hide(),void(i?$("#main_box_end_mock").show():$("#main_box_end").show());if(u=c[d],$("#question_span").html(u.question),$("#option1_span").html(u.option1),$("#option2_span").html(u.option2),$("#option3_span").html(u.option3),$("#option4_span").html(u.option4),u.hasOwnProperty("reward_ratio")){let[e,t]=u.reward_ratio;e=Number(e),t=Number(t),v=e/t}else v=1;a=Date.now(),$("#progress").text(`Progress: ${d+1} / ${c.length}`)}$("#button_instructions_next").on("click",(()=>N(1))),$("#button_instructions_prev").on("click",(()=>N(-1))),$("#button_next").on("click",(()=>{if(-1!=d){let e={question_i:d,user_balance_post_interaction:g,user_trust_val:m,initial_user_decision:p,final_user_decision:f,initial_user_confidence:h,final_user_confidence:b};e.times={initial_decision:r-a,initial_confidence:l-r,final_decision:s-l,final_confidence:_-s,trust_decision:Date.now()-_},e.question=u,e.count_exited_page=k,e.ai_assistance_intervention_data=A,e.trust_effect_prediction_data=O,async function(e){if(i)console.log("logged (mock)",e);else{e.url_data=globalThis.url_data,console.log("Data"),"study_id"in e.url_data||(e.url_data.study_id="trialrun_studies"),e.url_data.queue_id=globalThis.uid,console.log("logged",e),console.log("Logging to",t+"log");try{return await $.ajax(t+"log",{data:JSON.stringify({project:"medical-diagnosis-study/"+e.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+e.url_data.prolific_id,payload:JSON.stringify(e)}),type:"POST",contentType:"application/json"})}catch(e){console.log(e)}}}(e),k=0}J()})),$("#range_val").on("input change",(function(){m=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*m} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>S(1))),$("#button_initial_decision_option2").on("click",(()=>S(2))),$("#button_initial_decision_option3").on("click",(()=>S(3))),$("#button_initial_decision_option4").on("click",(()=>S(4))),$("#button_initial_confidence_option1").on("click",(()=>j(1))),$("#button_initial_confidence_option2").on("click",(()=>j(2))),$("#button_initial_confidence_option3").on("click",(()=>j(3))),$("#button_final_decision_option1").on("click",(()=>U(1))),$("#button_final_decision_option2").on("click",(()=>U(2))),$("#button_final_decision_option3").on("click",(()=>U(3))),$("#button_final_decision_option4").on("click",(()=>U(4))),$("#button_final_confidence_option1").on("click",(()=>P(1))),$("#button_final_confidence_option2").on("click",(()=>P(2))),$("#button_final_confidence_option3").on("click",(()=>P(3)));const q=new URLSearchParams(window.location.search),E=q.get("start"),L=q.get("uid");if(globalThis.url_data=function(e){const t={};for(const[i,n]of e)t[i]=n;return t}(q.entries()),null!=L){if(globalThis.uid=L,"prolific_random"==globalThis.uid){let e=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${q.get("prolific_queue_name")}/${e}`}}else{let e=null;for(;null==e;)e=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=e}let F=q.get("intervention_type"),Y=Number(q.get("intervention_threshold")),M=Number(q.get("intervention_fixedconfincrease")),B="true"==q.get("use_user_reported_trust_level");if(null==F&&(F="none"),null==Y&&(Y=-1),null==M&&(M=0),null==B&&(B=!1),!["none","dummy","confidence_inflation","confidence_inflation_fixed","confidence_deflation"].includes(F))throw new Error("Invalid AI Assistance Intervention: "+F);globalThis.url_data.intervention_type=F,globalThis.url_data.intervention_threshold=Y,globalThis.uid.startsWith("demo_paper")&&(i=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((e=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((e=>{c=e,null!=E&&(d=parseInt(E)-1,console.log("Starting from",d)),N(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let W=!1;document.onvisibilitychange=()=>{W||(k+=1,W=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),W=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNQyxJQUNKckksRUFBT3FJLEVBQ2MsTUFBakJwQixJQUNBM0csRUFBYWdJLFNBQVNyQixHQUFpQixFQUN2Q3RFLFFBQVFDLElBQUksZ0JBQWlCdEMsSUFHakNtQixFQUFrQixHQUNsQkUsRUFBRSwwQkFBMEJHLE9BQzVCSCxFQUFFLGlDQUFpQ0ssTUFBTSxJQUc3Q1csUUFBUUMsSUFBSSw2QkFBOEIyRCxXQUFXRSxLQUVyRCxJQUFJOEIsR0FBZSxFQUNuQkMsU0FBU0MsbUJBQXFCLEtBQ3JCRixJQUNEdkgsR0FBcUIsRUFDckJ1SCxHQUFlLEVBQ1RoQyxXQUFXRSxJQUFLcUIsV0FBVyxTQUM3QlksTUFBTSxnRkFFVkgsR0FBZSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSAnLi9nbG9iYWxzJ1xuaW1wb3J0IHsgTU9DS01PREUgfSBmcm9tICcuL21haW4nXG5cbmxldCBTRVJWRVJfTE9HX1JPT1QgPSBERVZNT0RFID8gXCJodHRwOi8vMTI3LjAuMC4xOjUwMDAvXCIgOiBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZF9kYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gaW5jbHVkZSB0aW1lc3RhbXAgc28gdGhhdCB0aGluZ3MgZG9uJ3QgZ2V0IGNhY2hlZFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmdldEpTT04oXG4gICAgICAgIGBiYWtlZF9xdWV1ZXMvJHtnbG9iYWxUaGlzLnVpZH0uanNvbj90PSR7RGF0ZS5ub3coKX1gLFxuICAgIClcbiAgICByZXR1cm4gcmVzdWx0XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nX2RhdGEoZGF0YSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkIChtb2NrKVwiLCBkYXRhKVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwidHJpYWxydW5fc3R1ZGllc1wiXG4gICAgfVxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXVtcInF1ZXVlX2lkXCJdID0gZ2xvYmFsVGhpcy51aWRcbiAgICBjb25zb2xlLmxvZyhcImxvZ2dlZFwiLCBkYXRhKVxuICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0b1wiLCBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiKVxuXG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIm1lZGljYWwtZGlhZ25vc2lzLXN0dWR5L1wiICsgZGF0YVsndXJsX2RhdGEnXVsnc3R1ZHlfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBnbG9iYWxUaGlzLnVpZC5yZXBsYWNlKFwiL1wiLCBcIl9cIikgKyBcIl9cIiArIGRhdGFbJ3VybF9kYXRhJ11bJ3Byb2xpZmljX2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxufSIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tIFwiLi9nbG9iYWxzXCJcbmV4cG9ydCB2YXIgVUlEOiBzdHJpbmdcbmV4cG9ydCB2YXIgTU9DS01PREU6IGJvb2xlYW4gPSBmYWxzZVxuaW1wb3J0IHsgbG9hZF9kYXRhLCBsb2dfZGF0YSB9IGZyb20gJy4vY29ubmVjdG9yJ1xuaW1wb3J0IHsgcGFyYW1zVG9PYmplY3QgfSBmcm9tIFwiLi91dGlsc1wiXG4vL2ltcG9ydCB7IGdldF91c2VyX3RydXN0X2VmZmVjdCwgZ2V0X2FkanVzdGVkX2FpX2NvbmZpZGVuY2V9IGZyb20gXCIuL3J1bl91c2VyX21vZGVsc1wiXG5cbmxldCBVU0VSX01PREVMU19ST09UID0gXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcbmxldCB1c2VyX2RlY2lzaW9uX21vZGVsID0gXCJ1c2VyX2FjY2VwdGFuY2VfbW9kZWwtbG9naXN0aWNyZWdyZXNzaW9uLTAuOTM0N3Rlc3RmMVwiXG5sZXQgdHJ1c3RfZWZmZWN0X21vZGVsID0gXCJ0cnVzdF9lZmZlY3RfbW9kZWwtc3ZtX2xpbmVhci0wLjQ2NDR0ZXN0bWFlLTAuOTA5NXRlc3R0ZWRhXCJcblxudmFyIGRhdGE6IGFueVtdID0gW11cbmxldCBxdWVzdGlvbl9pID0gLTFcbmxldCBxdWVzdGlvbjogYW55ID0gbnVsbFxubGV0IGluaXRpYWxfdXNlcl9kZWNpc2lvbjogbnVtYmVyID0gLTFcbmxldCBmaW5hbF91c2VyX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGluaXRpYWxfdXNlcl9jb25maWRlbmNlOiBudW1iZXIgPSAtMVxubGV0IGZpbmFsX3VzZXJfY29uZmlkZW5jZTogbnVtYmVyID0gLTFcbmxldCBiYWxhbmNlID0gMFxubGV0IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IDVcbmxldCBiZXRfdmFsX3JhdGlvOiBudW1iZXIgPSAxXG5sZXQgdGltZV9xdWVzdGlvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydDogbnVtYmVyXG5sZXQgaW5zdHJ1Y3Rpb25faTogbnVtYmVyID0gMFxubGV0IGNvdW50X2V4aXRlZF9wYWdlOiBudW1iZXIgPSAwXG5cbmxldCB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSAwXG5cbnZhciBhbGxfdXNlcl9pbnRlcmFjdGlvbnMgPSBbXVxudmFyIGFpX2Fzc2lzdGFuY2VfaW50ZXJ2ZW50aW9uX2RhdGEgPSB7fVxudmFyIGludGVydmVudGlvbl9kZXRhaWxzID0ge31cbnZhciB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge31cbmxldCBmaW5kbmV3Y29uZl9yZXN1bHQ6IGFueVxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5leHRfaW5zdHJ1Y3Rpb25zKGluY3JlbWVudDogbnVtYmVyKSB7XG4gICAgaW5zdHJ1Y3Rpb25faSArPSBpbmNyZW1lbnRcblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA2KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNykge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmIChxdWVzdGlvbl9pICE9IC0xKSB7XG4gICAgICAgIGxldCBsb2dnZWRfZGF0YSA9IHtcbiAgICAgICAgICAgIFwicXVlc3Rpb25faVwiOiBxdWVzdGlvbl9pLFxuICAgICAgICAgICAgXCJ1c2VyX2JhbGFuY2VfcG9zdF9pbnRlcmFjdGlvblwiOiBiYWxhbmNlLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbFwiOiB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJpbml0aWFsX3VzZXJfZGVjaXNpb25cIjogaW5pdGlhbF91c2VyX2RlY2lzaW9uLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2RlY2lzaW9uXCI6IGZpbmFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9jb25maWRlbmNlXCI6IGluaXRpYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2NvbmZpZGVuY2VcIjogZmluYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RpbWVzJ10gPSB7XG4gICAgICAgICAgICBcImluaXRpYWxfZGVjaXNpb25cIjogdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJpbml0aWFsX2NvbmZpZGVuY2VcIjogdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9kZWNpc2lvblwiOiB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9jb25maWRlbmNlXCI6IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgLSB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcInRydXN0X2RlY2lzaW9uXCI6IERhdGUubm93KCkgLSB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZF9kYXRhWydxdWVzdGlvbiddID0gcXVlc3Rpb25cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ2NvdW50X2V4aXRlZF9wYWdlJ10gPSBjb3VudF9leGl0ZWRfcGFnZVxuICAgICAgICBsb2dnZWRfZGF0YVsnYWlfYXNzaXN0YW5jZV9pbnRlcnZlbnRpb25fZGF0YSddID0gYWlfYXNzaXN0YW5jZV9pbnRlcnZlbnRpb25fZGF0YVxuICAgICAgICBsb2dnZWRfZGF0YVsndHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSddID0gdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YVxuICAgICAgICBsb2dfZGF0YShsb2dnZWRfZGF0YSlcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgPSAwXG5cbiAgICB9XG4gICAgbmV4dF9xdWVzdGlvbigpXG59KTtcblxuJCgnI3JhbmdlX3ZhbCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCA9ICgkKHRoaXMpLnZhbCgpISBhcyBudW1iZXIpXG4gICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoYEFmdGVyIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgY3VycmVudCB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAqIDEwfSAvIDEwMC5gKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG59KTtcblxuZnVuY3Rpb24gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24ob3B0aW9uKSB7XG4gICAgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2RlY2lzaW9uID0gb3B0aW9uXG4gICAgYXNzZXJ0KG9wdGlvbiA9PSAxIHx8IG9wdGlvbiA9PSAyIHx8IG9wdGlvbiA9PSAzIHx8IG9wdGlvbiA9PSA0LCBcIkludmFsaWQgb3B0aW9uIVwiKVxuXG4gICAgLy8gUmVtb3ZlIGFjdGl2ZWRlY2lzaW9uIGZvciBhbGwgYnV0dG9ucyBleGNlcHQgdGhlIHNlbGVjdGVkIG9uZVxuICAgICQoYCNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24ke29wdGlvbn1gKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNDsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9IG9wdGlvbikge1xuICAgICAgICAgICAgJChgI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgfVxuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJVc2VyJ3MgaW5pdGlhbCBkZWNpc2lvbjogT3B0aW9uIFwiLCBvcHRpb24pXG4gICAgXG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuc2hvdygpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDIpKVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMykpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjRcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbig0KSlcblxuZnVuY3Rpb24gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGluaXRpYWxfdXNlcl9jb25maWRlbmNlID0gY29uZl9sZXZlbFxuICAgIGFzc2VydChjb25mX2xldmVsID09IDEgfHwgY29uZl9sZXZlbCA9PSAyIHx8IGNvbmZfbGV2ZWwgPT0gMywgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICAvLyBSZW1vdmUgYWN0aXZlZGVjaXNpb24gZm9yIGFsbCBidXR0b25zIGV4Y2VwdCB0aGUgc2VsZWN0ZWQgb25lLiBEaXNhYmxlIGFsbCBidXR0b25zLlxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDM7IGkrKykge1xuICAgICAgICBpZiAoaSAhPSBjb25mX2xldmVsKSB7XG4gICAgICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgIH1cbiAgICAgICAgJChgI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChgI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtjb25mX2xldmVsfWApLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikgICAgXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikgICAgXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uNFwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikgICAgXG5cbiAgICBnZXRfYWlfYXNzaXN0YW5jZSgpXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDIpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuXG5hc3luYyBmdW5jdGlvbiBnZXRfdXNlcl9kZWNpc2lvbl9wcm9iKCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXRzIGZvciB0aGUgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCkge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwiYWlfY29uZmlkZW5jZVwiOiBhaV9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdXNlcl9kZWNpc2lvbl9wcm9iXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIm1lZGljYWwtZGlhZ25vc2lzLXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0c1wiOiB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cywgXG4gICAgICAgIFwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIjogcmVzdWx0W1wicHJlZF9wcm9ic1wiXVswXVsxXVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nKCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXQgdmFyaWFibGVzIGZvciB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlVzZXIgZGVjaXNpb24gbW9kZWwgaW5wdXRzOiBcIiwgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpXG5cbiAgICBsZXQgYWxkaWZmX3Jlc3VsdDogYW55XG4gICAgdHJ5IHtcbiAgICAgICAgYWxkaWZmX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCJtZWRpY2FsLWRpYWdub3Npcy1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZGlmZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0IHZhcmlhYmxlcyBmb3IgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCkge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCBmaW5kbmV3Y29uZl9pbnB1dF92YXJpYWJsZXMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0XCI6IHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QsXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGZpbmRuZXdjb25mX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheVwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCJtZWRpY2FsLWRpYWdub3Npcy1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShmaW5kbmV3Y29uZl9pbnB1dF92YXJpYWJsZXMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cblxuICAgIHJldHVybiBmaW5kbmV3Y29uZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0X2FpX2Fzc2lzdGFuY2UoKSB7XG4gICAgY29uc29sZS5sb2coXCJHZXR0aW5nIEFJIGFzc2lzdGFuY2UuLi5cIilcblxuICAgIGxldCBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IFwiQUkgaXMgZmlndXJpbmcgb3V0IGl0cyBjb25maWRlbmNlLi4uXCJcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCkge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgdXNlciByZXBvcnRlZCB0cnVzdCB2YWx1ZTogXCIsIHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgfVxuXG4gICAgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcIm5vbmVcIikge1xuICAgICAgICAvLyBObyBpbnRlcnZlbnRpb24sIGp1c3Qgc2hvdyB0aGUgQUkgYXNzaXN0YW5jZSB0aGF0IGlzIGFscmVhZHkgcG9wdWxhdGVkIGluIHRoZSBzcGFuXG4gICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuXG4gICAgfSBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJkdW1teVwiKSB7XG4gICAgICAgIC8vIER1bW15IGludGVydmVudGlvbiwganVzdCBzaG93IHRoZSBBSSdzIGFjdHVhbCBjb25maWRlbmNlIGJ1dCBhbHNvIGdldHMgdXNlciBhY2NlcHRhbmNlIGxpa2VsaWhvb2QgZnJvbSBtb2RlbFxuICAgICAgICBsZXQgdWRtX3Jlc3VsdCA9IGF3YWl0IGdldF91c2VyX2RlY2lzaW9uX3Byb2IoKVxuICAgICAgICBsZXQgdXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2QgPSB1ZG1fcmVzdWx0W1widXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIGRlY2lzaW9uIG1vZGVsIGlucHV0czogXCIsIHVkbV9yZXN1bHRbXCJ1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0c1wiXSlcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb246IFwiLCB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZClcblxuICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XG4gICAgICAgICAgICBcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCI6IHVkbV9yZXN1bHRbXCJ1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0c1wiXSxcbiAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kXCI6IHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kLFxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX2luZmxhdGlvblwiKSB7XG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCAwKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBhbGRpZmZfcmVzdWx0ID0gYXdhaXQgZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nKCkgICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBhbF9kaWZmID0gYWxkaWZmX3Jlc3VsdFtcImFsX2RpZmZcIl1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlcidzIGxpa2VsaWhvb2Qgb2YgZ29pbmcgd2l0aCB0aGUgQUkncyBwcmVkaWN0aW9uOiBcIiwgYWxkaWZmX3Jlc3VsdFtcImFjdHVhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlcidzIGxpa2VsaWhvb2Qgb2YgZ29pbmcgd2l0aCB0aGUgQUkncyBwcmVkaWN0aW9uIHdpdGggbmV1dHJhbCB0cnVzdDogXCIsIGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBY2NlcHRhbmNlIExpa2VsaWhvb2QgRGlmZjogXCIsIGFsX2RpZmYpXG4gICAgICAgICAgICBsZXQgdXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCA9IGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdXG5cbiAgICAgICAgICAgIGxldCBpbnRlcnZlbnRpb25fYXBwbGllZCA9IGZhbHNlXG4gICAgICAgICAgICBpZiAoYWxfZGlmZiA+IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9hcHBsaWVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIC8vRmluZCBuZWFyZXN0IEFJIGNvbmZpZGVuY2Ugd2l0aCBtaW5pbWl6aW5nIEFMRGlmZlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZpbmRuZXdjb25mX3Jlc3VsdCA9IGF3YWl0IGZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheSh1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0KVxuICAgICAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gU3RyaW5nKChmaW5kbmV3Y29uZl9yZXN1bHRbJ25ld19jb25mX3RvX2Rpc3BsYXknXSAqIDEwMCkudG9GaXhlZCgwKSkgKyBcIiVcIiAgLy8gQ29uZmlkZW5jZSBpbiBBSSdzIHByZWRpY3Rpb25cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RfcmVzdWx0c1wiOiBhbGRpZmZfcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBcImZpbmRuZXdjb25mX3Jlc3VsdHNcIjogZmluZG5ld2NvbmZfcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICAgICAgICAgICAgICBcImNvbmZfYWN0dWFsXCI6IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiY29uZl9uZXdcIjogZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UsXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfYWN0dWFsdHJ1c3RcIjogYWxkaWZmX3Jlc3VsdFtcImFjdHVhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9uZXV0cmFsdHJ1c3RcIjogYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLW5ld2NvbmZfYWN0dWFsdHJ1c3RcIjogZmluZG5ld2NvbmZfcmVzdWx0W1wibmV3X2NvbmZfYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImludGVydmVudGlvbl9hcHBsaWVkXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2FwcGxpZWQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZF9yZXN1bHRzXCI6IGFsZGlmZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIFwiY29uZl9hY3R1YWxcIjogcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9hY3R1YWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX25ldXRyYWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XCJpbnRlcnZlbnRpb25fYXBwbGllZFwiOiBmYWxzZX1cbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX2luZmxhdGlvbl9maXhlZFwiKSB7XG4gICAgICAgIC8vIElmIHVzZXIncyBjdXJyZW50IHRydXN0IGlzIG5lZ2F0aXZlIGFuZCB0aGUgdXNlcidzIGluaXRpYWwgZGVjaXNpb24gaXMgZGlmZmVyZW50IGZyb20gdGhlIEFJJ3MgcHJlZGljdGlvblxuICAgICAgICAvLyB0aGVuIGluZmxhdGUgdGhlIEFJJ3MgY29uZmlkZW5jZSBieSBhIGZpeGVkIGFtb3VudFxuXG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCAwICYmIGluaXRpYWxfdXNlcl9kZWNpc2lvbiAhPSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKSB7XG5cbiAgICAgICAgICAgIGxldCBhbGRpZmZfcmVzdWx0ID0gYXdhaXQgZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nKClcbiAgICAgICAgICAgIGxldCBhbF9kaWZmID0gYWxkaWZmX3Jlc3VsdFtcImFsX2RpZmZcIl1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlcidzIGxpa2VsaWhvb2Qgb2YgZ29pbmcgd2l0aCB0aGUgQUkncyBwcmVkaWN0aW9uOiBcIiwgYWxkaWZmX3Jlc3VsdFtcImFjdHVhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlcidzIGxpa2VsaWhvb2Qgb2YgZ29pbmcgd2l0aCB0aGUgQUkncyBwcmVkaWN0aW9uIHdpdGggbmV1dHJhbCB0cnVzdDogXCIsIGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBY2NlcHRhbmNlIExpa2VsaWhvb2QgRGlmZjogXCIsIGFsX2RpZmYpXG5cbiAgICAgICAgICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgICAgICAgICBsZXQgbmV3X2NvbmZpZGVuY2UgPSBNYXRoLm1pbigxLCBhaV9jb25maWRlbmNlICsgSW50ZXJ2ZW50aW9uRml4ZWRDb25mSW5jcmVhc2UpXG4gICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IFN0cmluZygoIG5ld19jb25maWRlbmNlICogMTAwKS50b0ZpeGVkKDApKSArIFwiJVwiXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZF9yZXN1bHRzXCI6IGFsZGlmZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgICAgICAgICBcImNvbmZfYWN0dWFsXCI6IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0sXG4gICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9hY3R1YWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfbmV1dHJhbHRydXN0XCI6IGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgIFwiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogdHJ1ZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogZmFsc2V9XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiY29uZmlkZW5jZV9kZWZsYXRpb25cIikge1xuICAgICAgICBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gMCkge1xuICAgICAgICAgICAgbGV0IGFsZGlmZl9yZXN1bHQgPSBhd2FpdCBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKVxuICAgICAgICAgICAgbGV0IGFsX2RpZmYgPSBhbGRpZmZfcmVzdWx0W1wiYWxfZGlmZlwiXVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb246IFwiLCBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb24gd2l0aCBuZXV0cmFsIHRydXN0OiBcIiwgYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjY2VwdGFuY2UgTGlrZWxpaG9vZCBEaWZmOiBcIiwgYWxfZGlmZilcbiAgICAgICAgICAgIGxldCB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0ID0gYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cblxuICAgICAgICAgICAgbGV0IGludGVydmVudGlvbl9hcHBsaWVkID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChhbF9kaWZmID4gSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2FwcGxpZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgLy9GaW5kIG5lYXJlc3QgQUkgY29uZmlkZW5jZSB3aXRoIG1pbmltaXppbmcgQUxEaWZmXG4gICAgICAgICAgICAgICAgbGV0IGZpbmRuZXdjb25mX3Jlc3VsdCA9IGF3YWl0IGZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheSh1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0KVxuICAgICAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gU3RyaW5nKChmaW5kbmV3Y29uZl9yZXN1bHRbJ25ld19jb25mX3RvX2Rpc3BsYXknXSAqIDEwMCkudG9GaXhlZCgwKSkgKyBcIiVcIiAgLy8gQ29uZmlkZW5jZSBpbiBBSSdzIHByZWRpY3Rpb25cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RfcmVzdWx0c1wiOiBhbGRpZmZfcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBcImZpbmRuZXdjb25mX3Jlc3VsdHNcIjogZmluZG5ld2NvbmZfcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICAgICAgICAgICAgICBcImNvbmZfYWN0dWFsXCI6IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiY29uZl9uZXdcIjogZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UsXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfYWN0dWFsdHJ1c3RcIjogYWxkaWZmX3Jlc3VsdFtcImFjdHVhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9uZXV0cmFsdHJ1c3RcIjogYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0sXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjZXB0YW5jZV9saWtlbGlob29kLW5ld2NvbmZfYWN0dWFsdHJ1c3RcIjogZmluZG5ld2NvbmZfcmVzdWx0W1wibmV3X2NvbmZfYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImludGVydmVudGlvbl9hcHBsaWVkXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2FwcGxpZWQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZF9yZXN1bHRzXCI6IGFsZGlmZl9yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIFwiY29uZl9hY3R1YWxcIjogcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2QtYWN0dWFsY29uZl9hY3R1YWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdLFxuICAgICAgICAgICAgICAgICAgICBcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX25ldXRyYWx0cnVzdFwiOiBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogZmFsc2V9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1sndHJ1c3RfbGV2ZWxfYXRfc3RhcnRfb2ZfaW50ZXJhY3Rpb24nXSA9IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbFxuICAgIGFpX2Fzc2lzdGFuY2VfaW50ZXJ2ZW50aW9uX2RhdGEgPSB7XG4gICAgICAgIFwiaW50ZXJ2ZW50aW9uX3R5cGVcIjogQUlJbnRlcnZlbnRpb25UeXBlLFxuICAgICAgICBcImFjdHVhbF9haV9jb25maWRlbmNlXCI6IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0sXG4gICAgICAgIFwiZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcIjogZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwiaW50ZXJ2ZW50aW9uX2RldGFpbHNcIjogaW50ZXJ2ZW50aW9uX2RldGFpbHMsXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiQUkgQXNzaXN0YW5jZSBJbnRlcnZlbnRpb24gRGF0YTogXCIsIGFpX2Fzc2lzdGFuY2VfaW50ZXJ2ZW50aW9uX2RhdGEpXG5cbiAgICAkKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAkKFwiI2FpX2NvbmZpZGVuY2Vfc3BhblwiKS5odG1sKGRpc3BsYXllZF9haV9jb25maWRlbmNlKVxuXG4gICAgJChcIiNhaV9hc3Npc3RhbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfZGVjaXNpb25fZGl2XCIpLnNob3coKVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRfdHJ1c3RfZWZmZWN0KCkge1xuICAgIC8vIEdldCB0cnVzdCBlZmZlY3QgZm9yIHRoaXMgaW50ZXJhY3Rpb25cbiAgICBsZXQgaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXSlcbiAgICBsZXQgYWlfY29ycmVjdG5lc3MgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSA9PSBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXSlcbiAgICBsZXQgZmluYWxfdXNlcl9jb3JyZWN0bmVzcyA9IE51bWJlcihmaW5hbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHRydXN0X2VmZmVjdF9pbnB1dHMgPSB7XG4gICAgICAgIFwiaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzXCI6IGluaXRpYWxfdXNlcl9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJhaV9jb3JyZWN0bmVzc1wiOiBhaV9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJmaW5hbF91c2VyX2NvcnJlY3RuZXNzXCI6IGZpbmFsX3VzZXJfY29ycmVjdG5lc3MsXG4gICAgICAgIFwiYWlfY29uZmlkZW5jZVwiOiBhaV9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiVHJ1c3QgZWZmZWN0IGlucHV0czogXCIsIHRydXN0X2VmZmVjdF9pbnB1dHMpXG4gICAgLy9sZXQgdHJ1c3RfZWZmZWN0ID0gZ2V0X3VzZXJfdHJ1c3RfZWZmZWN0KHRydXN0X2VmZmVjdF9pbnB1dHMpXG4gICAgbGV0IHJlc3VsdDogYW55XG4gICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZ2V0X3RydXN0X2VmZmVjdFwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCJtZWRpY2FsLWRpYWdub3Npcy1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB0cnVzdF9lZmZlY3RfbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHRydXN0X2VmZmVjdF9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiVHJ1c3QgZWZmZWN0IHByZWRpY3Rpb24gcmVzdWx0OiBcIiwgcmVzdWx0KVxuICAgIGxldCB0cnVzdF9lZmZlY3QgPSBhd2FpdCByZXN1bHRbXCJ0cnVzdF9lZmZlY3RcIl1cblxuICAgIHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsICsgdHJ1c3RfZWZmZWN0XG4gICAgdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSA9IHtcbiAgICAgICAgXCJtb2RlbF9pbnB1dHNcIjogdHJ1c3RfZWZmZWN0X2lucHV0cyxcbiAgICAgICAgXCJwcmVkaWN0ZWRfdHJ1c3RfZWZmZWN0XCI6IHRydXN0X2VmZmVjdCxcbiAgICAgICAgXCJ1c2VyX25ld190cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsLFxuICAgIH1cbiAgICByZXR1cm4gdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YVxufVxuXG5mdW5jdGlvbiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24ob3B0aW9uKSB7XG4gICAgdGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGZpbmFsX3VzZXJfZGVjaXNpb24gPSBvcHRpb25cbiAgICBhc3NlcnQob3B0aW9uID09IDEgfHwgb3B0aW9uID09IDIgfHwgb3B0aW9uID09IDMgfHwgb3B0aW9uID09IDQsIFwiSW52YWxpZCBvcHRpb24hXCIpXG5cbiAgICAvLyBSZW1vdmUgYWN0aXZlZGVjaXNpb24gZm9yIGFsbCBidXR0b25zIGV4Y2VwdCB0aGUgc2VsZWN0ZWQgb25lXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNDsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9IG9wdGlvbikge1xuICAgICAgICAgICAgJChgI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgIH1cbiAgICAgICAgJChgI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7b3B0aW9ufWApLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcblxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDIpKVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbigzKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjRcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oNCkpXG5cbmZ1bmN0aW9uIGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9jb25maWRlbmNlID0gY29uZl9sZXZlbFxuICAgIGFzc2VydChjb25mX2xldmVsID09IDEgfHwgY29uZl9sZXZlbCA9PSAyIHx8IGNvbmZfbGV2ZWwgPT0gMywgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICAvLyBSZW1vdmUgYWN0aXZlZGVjaXNpb24gZm9yIGFsbCBidXR0b25zIGV4Y2VwdCB0aGUgc2VsZWN0ZWQgb25lXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9IGNvbmZfbGV2ZWwpIHtcbiAgICAgICAgICAgICQoYCNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgIH1cbiAgICAgICAgJChgI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbiR7aX1gKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoYCNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24ke2NvbmZfbGV2ZWx9YCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuXG4gICAgc2hvd19yZXN1bHQoKVxufVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgxKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMikpXG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjNcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDMpKVxuXG5cbmFzeW5jIGZ1bmN0aW9uIHNob3dfcmVzdWx0KCkge1xuXG4gICAgbGV0IGNvcnJlY3Rfb3B0aW9uOiBudW1iZXIgPSBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXVxuICAgIGxldCBjb3JyZWN0X29wdGlvbl9zdHI6IHN0cmluZyA9IHF1ZXN0aW9uIVtgb3B0aW9uJHtjb3JyZWN0X29wdGlvbn1gXVxuICAgIGxldCB1c2VyX2lzX2NvcnJlY3Q6IGJvb2xlYW4gPSBjb3JyZWN0X29wdGlvbiA9PSBmaW5hbF91c2VyX2RlY2lzaW9uXG5cbiAgICBsZXQgYWlfaXNfY29ycmVjdDogYm9vbGVhbiA9IHF1ZXN0aW9uIVtcImFpX2lzX2NvcnJlY3RcIl1cbiAgICBsZXQgbWVzc2FnZSA9IFwiQ29ycmVjdCBhbnN3ZXI6IDxiPk9wdGlvbiBcIiArIGNvcnJlY3Rfb3B0aW9uICsgXCI6IFwiICsgY29ycmVjdF9vcHRpb25fc3RyICsgXCI8L2I+Ljxicj5cIlxuICAgIGlmICh1c2VyX2lzX2NvcnJlY3QpIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2NvcnJlY3QnPjxiPmNvcnJlY3Q8L2I+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJZb3UgcGlja2VkIE9wdGlvbiBcIiArIGZpbmFsX3VzZXJfZGVjaXNpb24gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAoYWlfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiVGhlIEFJIHBpY2tlZCBPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDxiPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtZXNzYWdlICs9IFwiVGhlIEFJIHBpY2tlZCBPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfaW5jb3JyZWN0Jz48Yj5pbmNvcnJlY3Q8L2I+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yX2NvcnJlY3QnPjxiPllvdSByZWNlaXZlIGEgcmV3YXJkIG9mICQwLjEwLjwvYj48L3NwYW4+XCJcbiAgICAgICAgYmFsYW5jZSArPSAwLjFcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfaW5jb3JyZWN0Jz48Yj5Zb3UgZG8gbm90IHJlY2VpdmUgYW55IHJld2FyZC48L2I+PC9zcGFuPlwiXG4gICAgfVxuXG4gICAgbWVzc2FnZSArPSBcIjxicj5cIlxuICAgIC8vaWYgKHN1Y2Nlc3MpIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgZ2FpbiAkJHsoYmV0X3ZhbCpiZXRfdmFsX3JhdGlvKS50b0ZpeGVkKDIpfS5gXG4gICAgLy8gICAgYmFsYW5jZSArPSBiZXRfdmFsKmJldF92YWxfcmF0aW9cbiAgICAvL30gZWxzZSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBgWW91IGxvc2UgJCR7KGJldF92YWwvMS4wKS50b0ZpeGVkKDIpfS5gXG4gICAgLy8gICAgYmFsYW5jZSAtPSBiZXRfdmFsLzEuMFxuICAgIC8vICAgIGJhbGFuY2UgPSBNYXRoLm1heCgwLCBiYWxhbmNlKVxuICAgIC8vfVxuICAgICQoXCIjYmFsYW5jZVwiKS50ZXh0KGBCYWxhbmNlOiAkJHtiYWxhbmNlLnRvRml4ZWQoMil9ICsgJDIuMGApXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5odG1sKG1lc3NhZ2UpXG4gICAgLy8kKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuc2hvdygpXG4gICAgLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikuaGlkZSgpXG4gICAgJChcIiNob3dfY29uZmlkZW50X2RpdlwiKS5zaG93KClcblxuICAgIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSBhd2FpdCBnZXRfdHJ1c3RfZWZmZWN0KClcblxuICAgIC8vJCgnI3JhbmdlX3ZhbCcpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbn1cblxuLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikub24oXCJjbGlja1wiLCBzaG93X3Jlc3VsdClcblxuZnVuY3Rpb24gbmV4dF9xdWVzdGlvbigpIHtcbiAgICAvLyByZXN0b3JlIHByZXZpb3VzIHN0YXRlIG9mIFVJXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNDsgaSsrKSB7XG4gICAgICAgICQoYCNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoYCNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgICAgICQoYCNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKGAjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbiR7aX1gKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHtcbiAgICAgICAgJChgI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uJHtpfWApLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKGAjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgICAgICQoYCNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoYCNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24ke2l9YCkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgfVxuXG4gICAgJChcIiNhaV9hc3Npc3RhbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfZGVjaXNpb25fZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKCcjcmFuZ2VfdmFsJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNob3dfY29uZmlkZW50X2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikuaGlkZSgpXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5oaWRlKClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmhpZGUoKVxuICAgIGlmIChxdWVzdGlvbl9pID09IC0xKSB7XG4gICAgICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KFwiLVwiKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoYEJlZm9yZSB0aGlzIGludGVyYWN0aW9uLCB5b3VyIHRydXN0IGluIHRoZSBBSTogJHt1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsICogMTB9IC8gMTAwLmApXG4gICAgfVxuICAgICQoXCIjcmFuZ2VfdmFsXCIpLnZhbCh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsKVxuXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kX21vY2tcIikuc2hvdygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlc3Rpb24gPSBkYXRhW3F1ZXN0aW9uX2ldXG5cbiAgICAkKFwiI3F1ZXN0aW9uX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJxdWVzdGlvblwiXSlcbiAgICAkKFwiI29wdGlvbjFfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjFcIl0pXG4gICAgJChcIiNvcHRpb24yX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJvcHRpb24yXCJdKVxuICAgICQoXCIjb3B0aW9uM19zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uM1wiXSlcbiAgICAkKFwiI29wdGlvbjRfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjRcIl0pXG4gICAgLy8kKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAvLyQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSlcblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICBpZihxdWVzdGlvbi5oYXNPd25Qcm9wZXJ0eShcInJld2FyZF9yYXRpb1wiKSkge1xuICAgICAgICBsZXQgW3JhdGlvMSwgcmF0aW8yXSA9IHF1ZXN0aW9uW1wicmV3YXJkX3JhdGlvXCJdXG4gICAgICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgICAgIHJhdGlvMiA9IE51bWJlcihyYXRpbzIpXG4gICAgICAgIGJldF92YWxfcmF0aW8gPSByYXRpbzEvcmF0aW8yXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IDFcbiAgICB9XG5cbiAgICB0aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxufVxuXG4vLyBnZXQgdXNlciBpZCBhbmQgbG9hZCBxdWV1ZVxuLy8gdHJ5IHRvIHNlZSBpZiBzdGFydCBvdmVycmlkZSB3YXMgcGFzc2VkXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3Qgc3RhcnRPdmVycmlkZSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJ0Jyk7XG5jb25zdCBVSURGcm9tVVJMID0gdXJsUGFyYW1zLmdldChcInVpZFwiKVxuZ2xvYmFsVGhpcy51cmxfZGF0YSA9IHBhcmFtc1RvT2JqZWN0KHVybFBhcmFtcy5lbnRyaWVzKCkpXG5cbmlmIChVSURGcm9tVVJMICE9IG51bGwpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJREZyb21VUkwgYXMgc3RyaW5nXG4gICAgaWYgKGdsb2JhbFRoaXMudWlkID09IFwicHJvbGlmaWNfcmFuZG9tXCIpIHtcbiAgICAgICAgbGV0IHF1ZXVlX2lkID0gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfWAucGFkU3RhcnQoMywgXCIwXCIpXG4gICAgICAgIGdsb2JhbFRoaXMudWlkID0gYCR7dXJsUGFyYW1zLmdldChcInByb2xpZmljX3F1ZXVlX25hbWVcIil9LyR7cXVldWVfaWR9YFxuICAgIH1cbn0gZWxzZSBpZiAoREVWTU9ERSkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gXCJkZW1vXCJcbn0gZWxzZSB7XG4gICAgbGV0IFVJRF9tYXliZTogYW55ID0gbnVsbFxuICAgIHdoaWxlIChVSURfbWF5YmUgPT0gbnVsbCkge1xuICAgICAgICBVSURfbWF5YmUgPSBwcm9tcHQoXCJFbnRlciB5b3VyIHVzZXIgaWQuIFBsZWFzZSBnZXQgaW4gdG91Y2ggaWYgeW91IHdlcmUgbm90IGFzc2lnbmVkIGFuIGlkIGJ1dCB3aXNoIHRvIHBhcnRpY2lwYXRlIGluIHRoaXMgZXhwZXJpbWVudC5cIilcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURfbWF5YmUhXG59XG5cbmNvbnN0IHZhbGlkQUlJbnRlcnZlbnRpb25zID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9pbmZsYXRpb25cIiwgXCJjb25maWRlbmNlX2luZmxhdGlvbl9maXhlZFwiLCBcImNvbmZpZGVuY2VfZGVmbGF0aW9uXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25UeXBlID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90eXBlXCIpXG5sZXQgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdGhyZXNob2xkXCIpKVxubGV0IEludGVydmVudGlvbkZpeGVkQ29uZkluY3JlYXNlID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZml4ZWRjb25maW5jcmVhc2VcIikpXG5sZXQgdXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwgPSB1cmxQYXJhbXMuZ2V0KFwidXNlX3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWxcIikgPT0gXCJ0cnVlXCJcbmlmIChBSUludGVydmVudGlvblR5cGUgPT0gbnVsbCkge1xuICAgIEFJSW50ZXJ2ZW50aW9uVHlwZSA9IFwibm9uZVwiXG59IFxuaWYgKEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9PSBudWxsKSB7XG4gICAgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID0gLTFcbn1cbmlmIChJbnRlcnZlbnRpb25GaXhlZENvbmZJbmNyZWFzZSA9PSBudWxsKSB7XG4gICAgSW50ZXJ2ZW50aW9uRml4ZWRDb25mSW5jcmVhc2UgPSAwXG59XG5pZiAodXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwgPT0gbnVsbCkge1xuICAgIHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsID0gZmFsc2Vcbn1cblxuLy9Bc3NlcnQgdGhhdCB0aGUgQUlBc3Npc3RhbmNlSW50ZXJ2ZW50aW9uIGlzIG9uZSBvZiB0aGUgdmFsaWQgdmFsdWVzXG5pZiAoIXZhbGlkQUlJbnRlcnZlbnRpb25zLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uVHlwZSEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbjogXCIgKyBBSUludGVydmVudGlvblR5cGUpXG59XG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3R5cGVcIl0gPSBBSUludGVydmVudGlvblR5cGVcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fdGhyZXNob2xkXCJdID0gSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkXG5cbi8vIHZlcnNpb24gZm9yIHBhcGVyXG5pZiAoZ2xvYmFsVGhpcy51aWQuc3RhcnRzV2l0aChcImRlbW9fcGFwZXJcIikpIHtcbiAgICBNT0NLTU9ERSA9IHRydWVcbn0gZWxzZSB7XG5cbn1cbmNvbnNvbGUubG9nKFwiUnVubmluZyB3aXRoIFVJRFwiLCBnbG9iYWxUaGlzLnVpZClcbmxvYWRfZGF0YSgpLmNhdGNoKChfZXJyb3IpID0+IHtcbiAgICAvL2FsZXJ0KFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKGdsb2JhbFRoaXMudWlkISlcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbn1cbikudGhlbigobmV3X2RhdGEpID0+IHtcbiAgICBkYXRhID0gbmV3X2RhdGFcbiAgICBpZiAoc3RhcnRPdmVycmlkZSAhPSBudWxsKSB7XG4gICAgICAgIHF1ZXN0aW9uX2kgPSBwYXJzZUludChzdGFydE92ZXJyaWRlKSAtIDFcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydGluZyBmcm9tXCIsIHF1ZXN0aW9uX2kpXG4gICAgfVxuICAgIC8vIG5leHRfcXVlc3Rpb24oKVxuICAgIG5leHRfaW5zdHJ1Y3Rpb25zKDApXG4gICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuc2hvdygpXG4gICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxufSlcblxuY29uc29sZS5sb2coXCJTdGFydGluZyBzZXNzaW9uIHdpdGggVUlEOlwiLCBnbG9iYWxUaGlzLnVpZCEpXG5cbmxldCBhbGVydF9hY3RpdmUgPSBmYWxzZVxuZG9jdW1lbnQub252aXNpYmlsaXR5Y2hhbmdlID0gKCkgPT4ge1xuICAgIGlmICghYWxlcnRfYWN0aXZlKSB7XG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlICs9IDFcbiAgICAgICAgYWxlcnRfYWN0aXZlID0gdHJ1ZVxuICAgICAgICBpZiAoIShnbG9iYWxUaGlzLnVpZCEuc3RhcnRzV2l0aChcImRlbW9cIikpICYmICEoREVWTU9ERSkpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGRvbid0IGxlYXZlIHRoZSBwYWdlLiBJZiB5b3UgZG8gc28gYWdhaW4sIHdlIG1heSByZXN0cmljdCBwYXlpbmcgeW91LlwiKVxuICAgICAgICB9XG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG4gICAgfVxufSIsImZ1bmN0aW9uIHBhcmFtc1RvT2JqZWN0KGVudHJpZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cbiAgLy8gZWFjaCAnZW50cnknIGlzIGEgW2tleSwgdmFsdWVdIHR1cHBsZVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBwYXJhbXNUb09iamVjdCB9Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU0VSVkVSX0xPR19ST09UIiwiTU9DS01PREUiLCJVU0VSX01PREVMU19ST09UIiwidXNlcl9kZWNpc2lvbl9tb2RlbCIsImRhdGEiLCJ0aW1lX3F1ZXN0aW9uX3N0YXJ0IiwidGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCIsInRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQiLCJ0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCIsInRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsImluaXRpYWxfdXNlcl9kZWNpc2lvbiIsImZpbmFsX3VzZXJfZGVjaXNpb24iLCJpbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImJhbGFuY2UiLCJ1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwiYmV0X3ZhbF9yYXRpbyIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsInVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwiLCJhaV9hc3Npc3RhbmNlX2ludGVydmVudGlvbl9kYXRhIiwiaW50ZXJ2ZW50aW9uX2RldGFpbHMiLCJ0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhIiwiZmluZG5ld2NvbmZfcmVzdWx0IiwiYXNzZXJ0IiwiY29uZGl0aW9uIiwibWVzc2FnZSIsIm5leHRfaW5zdHJ1Y3Rpb25zIiwiaW5jcmVtZW50IiwiJCIsImF0dHIiLCJyZW1vdmVBdHRyIiwic2hvdyIsInZhbCIsImhpZGUiLCJuZXh0X3F1ZXN0aW9uIiwiY2hpbGRyZW4iLCJlYWNoIiwiXyIsImVsIiwibWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24iLCJvcHRpb24iLCJEYXRlIiwibm93IiwiaSIsImNvbnNvbGUiLCJsb2ciLCJnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UiLCJjb25mX2xldmVsIiwiYXN5bmMiLCJkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSIsInVzZXJfY3VycmVudF90cnVzdF9sZXZlbCIsInVzZVVzZXJSZXBvcnRlZFRydXN0VmFsIiwiQUlJbnRlcnZlbnRpb25UeXBlIiwidWRtX3Jlc3VsdCIsInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQiLCJOdW1iZXIiLCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZSIsImFpX2NvbmZpZGVuY2UiLCJyZXBsYWNlIiwicmVzdWx0IiwidXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMiLCJhamF4IiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2plY3QiLCJtb2RlbF9uYW1lIiwicGF5bG9hZCIsInR5cGUiLCJjb250ZW50VHlwZSIsImUiLCJnZXRfdXNlcl9kZWNpc2lvbl9wcm9iIiwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2QiLCJhbGRpZmZfcmVzdWx0IiwiZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nIiwiYWxfZGlmZiIsInVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QiLCJpbnRlcnZlbnRpb25fYXBwbGllZCIsIkludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCIsImZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheSIsIlN0cmluZyIsInRvRml4ZWQiLCJuZXdfY29uZmlkZW5jZSIsIk1hdGgiLCJtaW4iLCJJbnRlcnZlbnRpb25GaXhlZENvbmZJbmNyZWFzZSIsImh0bWwiLCJnZXRfYWlfYXNzaXN0YW5jZSIsImZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyIsIm1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbiIsImdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UiLCJjb3JyZWN0X29wdGlvbiIsImNvcnJlY3Rfb3B0aW9uX3N0ciIsInVzZXJfaXNfY29ycmVjdCIsImFpX2lzX2NvcnJlY3QiLCJ0ZXh0IiwidHJ1c3RfZWZmZWN0X2lucHV0cyIsInRydXN0X2VmZmVjdCIsImdldF90cnVzdF9lZmZlY3QiLCJzaG93X3Jlc3VsdCIsImxlbmd0aCIsInJhdGlvMSIsInJhdGlvMiIsIm9uIiwibG9nZ2VkX2RhdGEiLCJnbG9iYWxUaGlzIiwidXJsX2RhdGEiLCJ1aWQiLCJsb2dfZGF0YSIsInRoaXMiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN0YXJ0T3ZlcnJpZGUiLCJVSURGcm9tVVJMIiwiZW50cmllcyIsInZhbHVlIiwicGFyYW1zVG9PYmplY3QiLCJxdWV1ZV9pZCIsImZsb29yIiwicmFuZG9tIiwicGFkU3RhcnQiLCJVSURfbWF5YmUiLCJwcm9tcHQiLCJpbmNsdWRlcyIsIkVycm9yIiwic3RhcnRzV2l0aCIsImdldEpTT04iLCJsb2FkX2RhdGEiLCJjYXRjaCIsIl9lcnJvciIsInJlbG9hZCIsInRoZW4iLCJuZXdfZGF0YSIsInBhcnNlSW50IiwiYWxlcnRfYWN0aXZlIiwiZG9jdW1lbnQiLCJvbnZpc2liaWxpdHljaGFuZ2UiLCJhbGVydCJdLCJzb3VyY2VSb290IjoiIn0=